!function (i) { function t(e) { if (n[e]) return n[e].exports; var o = n[e] = { exports: {}, id: e, loaded: !1 }; return i[e].call(o.exports, o, o.exports, t), o.loaded = !0, o.exports } var n = {}; return t.m = i, t.c = n, t.p = "", t(0) } ([function (i, t, n) { if (txv.util.getUrlParam("report_recomm_player")) try { window.sessionStorage.setItem("report_recomm_player", txv.util.getUrlParam("report_recomm_player")) } finally { } n(1), n(66) }, function (i, t, n) { var e = n(2), o = n(45), r = n(4), a = { vid: VIDEO_INFO.vid }, c = txv.util.getUrlParam("start"), s = txv.util.getUrlParam("volume"); (c > VIDEO_INFO.playStartTime || c > VIDEO_INFO.piantou) && $.extend(a, { connectionPlayTime: c }), s.length && (s = 1 * s), "number" != typeof s || isNaN(s) || (a.volume = s), window.player_time_speed || (window.player_time_speed = {}), window.player_time_speed.startCreatePlayer = (new Date).getTime(), e.play(a); var p = n(56), l = n(3), d = n(57), v = n(46), u = !0; l.on("vipRefreshPage", function (i) { u = i }); var _ = { toggleSiderBar: function () { l.on("tvp-toggleSideBar", function (i) { "hide" == i ? $(".player_container").addClass("player_container_wide") : $(".player_container").removeClass("player_container_wide") }) }, refreshLogic: function () { var i = 0; if (e.getTxplayer()) { if (i = parseInt(e.getTxplayer().getCurrentTime()), l.emit("tvp-timeupdate", i, !0), !u) return; return void setTimeout(function () { window.location.reload(!1) }, 200) } u && window.location.reload(!1) }, correctUrl: function () { if ("function" == typeof history.replaceState && (COVER_INFO.id && document.URL.indexOf("//v.qq.com/x/page/") != -1 && history.replaceState({}, "", document.URL.replace("//v.qq.com/x/page/", "//v.qq.com/x/cover/" + COVER_INFO.id + "/")), location.href.match(/\/\/v.qq.com\/x\/cover\/\w{15}.html/) && location.href.match(/vid=\w{11}/))) { var i = location.href.match(/vid=(\w{11})/)[1], t = location.href.split("?")[1] || ""; t && (t = t.replace(/vid=\w{11}&?/, "")); var n = location.href.match(/(\/\/v.qq.com\/x\/cover\/\w{15}).html/); history.replaceState({}, "", n[1] + "/" + i + ".html?" + t) } }, tvpReady: function () { var i = !1; l.on("tvp-ready", function () { i || setTimeout(function () { txv.common.initPage({ tj2: { forbidden: !0 }, playPageFlag: !0, needWinSafariHack: !0 }) }, 100), p.reportPV(), c > 0 || "0" === c || _.playHistory(), _.toggleSiderBar(), i = !0, setTimeout(function () { n(63).init() }, 200), setTimeout(function () { n(64) }, 200), setTimeout(function () { n(65) }, 300) }) }, reportPv: function () { l.on("vidChanged", function (i) { p.reportPV(i.vid) }) }, playHistory: function () { var i = 1 * txv.util.getUrlParam("start"); if (!i) { var t; 2 == COVER_INFO.typeid && COVER_INFO.isNeedPay ? t = _.tvVipVid(a.vid) : (t = $.Deferred(), t.resolve("")), $.when(t, d.getHistoryByCid(COVER_INFO.id || "", VIDEO_INFO.vid)).then(function (i, t) { var n = VIDEO_INFO.vid; if (i && (n = i), t.vid) if (txv.log.log("getLastViewOfCid json"), txv.log.log(t), t.vid == n) { if (t.time > 0) return 4 != COVER_INFO.typeid && n != VIDEO_INFO.vid ? void l.emit("playhistory", t.vid, t.time) : void l.emit("tvp-seekto", { time: t.time, showTips: !0 }) } else if (4 != COVER_INFO.typeid && !p.getVidFromUrl() && COVER_INFO.id) return void l.emit("playhistory", t.vid, t.time); n != VIDEO_INFO.vid && l.emit("playhistory", n) }) } }, tvVipVid: function (i) { var t = $.Deferred(); return txv.vip.getVipInfo().always(function (n) { var e = ""; if (LIST_INFO.data[i].notviponly) { if (n && n.vip) { for (var o = $("#" + i), r = o.text().trim(), a = o.next(); a.length && a.text().trim() != r;)a = a.next(); e = a.attr("id") } } else LIST_INFO.data[i].viponly && !n.vip; return e && e != i ? void t.resolve(e) : void t.resolve("") }), t }, onSwitchVideo: function () { l.on("switchVideo", function (i, t) { var n; n = t ? $.extend({}, i, { connectionPlayTime: t, connectionPlayType: 0 }, i.playVid ? { vid: i.playVid } : {}) : $.extend({}, i, { connectionPlayType: 1 }, i.playVid ? { vid: i.playVid } : {}), e.play(n) }) }, onHistoryMsg: function () { l.wait("playhistory", function (i, t) { txv.log.log("播放历史vid"), v.get(i, function (n, e) { e && (l.emit("switchVideo", e, t), l.emit("vidChanged", e), l.emit("pushstate", { title: e.title, link: $("#" + i).find("a").attr("href") })) }) }) }, onPlayNext: function () { l.on("playNext", function (i) { i && 11 == i.length && v.get(i, function (t, n) { l.emit("vidChanged", n), l.emit("pushstate", { title: n.title, link: o.playUrl(COVER_INFO.id, i) }) }) }) }, onPlayVid: function () { l.on("playvid", function (i) { v.get(i, function (i, t) { l.emit("switchVideo", t), l.emit("vidChanged", t) }) }) }, onClickVid: function () { l.on("vidClick", function (i, t) { v.get(i, function (n, e) { t && (e = r.extend({}, e, t)), e.__gotfromlistinfo = !0, l.emit("switchVideo", e), l.emit("vidChanged", e, !0), l.emit("pushstate", { title: e.title, link: o.playUrl(COVER_INFO.id, i) }) }) }) }, listenAll: function () { _.tvpReady(), _.correctUrl(), _.toggleSiderBar(), _.reportPv(), _.onSwitchVideo(), _.onHistoryMsg(), _.onPlayNext(), _.onPlayVid(), _.onClickVid(), txv.vip.setIsNeedToGetAdPassInfo(!0); var i = !1; txv.login.addReadyCallback(function () { txv.vip.getVipInfo().done(function (t) { i = t && t.vip }), txv.login.addLogoutCallback(function () { i = !1 }) }), txv.login.addLoginCallback(function () { txv.vip.getVipInfo().done(function (t) { (t.vip || t.adpass) && (i = !0, _.refreshLogic()) }).always(function (t) { t && t.vip || i && _.refreshLogic() }) }), COVER_INFO.isNeedPay && txv.login.addLogoutCallback(function () { location.reload(!1) }) } }; _.listenAll() }, function (i, t, n) { function e() { return txv.login.isLogin() ? g.vip < 0 ? g.vip : g.vip > 0 ? 2 : 1 == g.adpass ? 6 : null !== g.qqvip ? g.qqvip ? g.qqvip + 3 : 1 : 90 : 0 } function o(i) { window.PLAYER = _ = new Txplayer($.extend({ nextVid: !1 }, i, y)), _.on("ready", function () { window.player_time_speed && (window.player_time_speed.playerInit = (new Date).getTime()), r.emit("tvp-ready"), a(r, _) }).on("playStateChange", function (i) { switch (txv.log.log(i), i.state != -1 && (m = !0), i.state) { case 0: r.emit("tvp-playend", i); break; case 1: window.player_time_speed && !window.player_time_speed.firstPic && (window.player_time_speed.firstPic = (new Date).getTime()), r.emit("tvp-playing", i); break; case 2: r.emit("tvp-paused", i) } }).on("timeupdate", function () { r.emit("tvp-timeupdate", _.getCurrentTime()) }).on("beforePlayNext", function (i) { var t = i.vid; return t && 11 != t.length && /\.html/i.test(t) ? void (location.href = t) : (txv.log.log("自动连播"), void r.emit("playNext", t)) }).on("clickCloseLight", function (i) { i ? light.off() : light.on() }).on("adStart", function () { window.player_time_speed && !window.player_time_speed.firstPic && (window.player_time_speed.firstPic = (new Date).getTime()), r.emit("tvp-adStart") }).on("adEnd", function () { r.emit("tvp-adEnd") }).on("toggleSideBarBtnClick", function (i) { txv.log.log("侧边栏状态：" + i), r.emit("tvp-toggleSideBar", i) }).on("windowFullscreenChange", function (i) { r.emit("tvp-winfullscreen", i) }).on("showLogin", function () { txv.login.openLogin() }).on("toggleHotBarrage", function (i) { r.emit("tvp-toggleHotBarrage", i) }).on("showUIVipGuide", function (i) { r.emit("tvp-showUIVipGuide", i) }).on("switchBullet", function (i) { r.emit("tvp-switchBullet", i) }).on("brandApiReady", function (i) { r.emit("tvp-brandApiReady", i) }).on("bulletReady", function (i) { r.emit("tvp-bulletReady", i) }).on("resume", function () { r.emit("tvp-resume") }).on("clickOpenPcClient", function () { r.emit("tvp-openClientPlay") }).on("volumeChange", function () { var i = Array.prototype.slice.call(arguments, 0); i.unshift("tvp-volumeChange"), r.emit.apply(r, i) }).on("vidChange", function (i) { r.emit("tvp-vidChange", i) }).on("error", function (i) { r.emit("tvp-error", i) }) } var r = n(3); window.PageMsg = r, n(5); var a = n(7), c = n(43), s = n(20); if (document.URL.indexOf("//v.qq.com/x/") != -1 || txv.util.getUrlParam("debug")) if (4 == COVER_INFO.typeid) { var p = n(50); v = p.get, u = p.getNext } else if (2 == COVER_INFO.typeid) { var l = n(51); v = l.get, u = l.getNext } else var d = n(44), v = d.getVideoInfoForPlayer, u = d.getNextVidInfo; else { var d = n(44); v = d.getVidInfoForZT, u = d.getNextVidInfoForZT } n(52), Txplayer.dataset.debug = !!txv.util.getUrlParam("debug"), Txplayer.dataset.ts = window.jsVersion && window.jsVersion.flash || "", Txplayer.dataset.pluginsPreload = !0; var _; n(53); var f = n(54), g = { vip: -1, adpass: 0 }, y = { containerId: "tenvideo_player", videoType: "vod", width: "100%", height: "100%", flashTimeStamp: window.jsVersion && window.jsVersion.flash || "", playerInitTime: window.player_time_speed ? window.player_time_speed.playerjs : 0, pageInitTime: window.player_time_speed ? window.player_time_speed.start : 0, autoplay: !0, showToggleSideBar: !0, showBrowserFullScreen: window.top == window, getNextVid: u, getUserType: e, cid: COVER_INFO.id, tpid: COVER_INFO.typeid, columnId: COVER_INFO.columnid || "", flashvar: { columnId: COVER_INFO.columnid || "", preSee: +(parseInt(COVER_INFO.pre_play_timelong_id) > 0) }, showOpenVIPGuide: function () { r.emit("tvp-skipad") }, followHandler: function () { r.emit("tvp-follow") }, brandSubscribeHandler: function () { r.emit("tvp-brandsubscribe") }, getUserBulletData: function () { return { headImg: txv.login.getAvatar() } }, getBrandData: f, loginHandler: { isLogin: function () { return txv.login.isLogin() }, getVipInfo: txv.vip.getVipInfo }, extendPluginsMap: { vod: { flash: ["Barrage"], html5hd: ["Barrage"] } }, flashCallFn: function (i) { var t; switch (i.type) { case "trailerMode": t = c; break; case "getPayTip": t = c; break; case "showRelationItem": t = function (i) { return r.emit("relation-item:show", $.extend({ fromPlayer: !0 }, i)), "" }; break; case "showRelationItemPop": t = function (i) { return r.emit("relation-item-pop:show", i), "" }; break; case "addRelationCart": t = function (i) { return r.emit("relation-item:add-cart", i), "" }; break; default: t = function () { return "" } }return t(i) } }; 5 == COVER_INFO.typeid && (y.showHTML5Switch = !0), $.extend(y, window.PlayerParam), txv.login.addReadyCallback(function () { txv.vip.getVipInfo().done(function (i) { g = i }) }), txv.login.addLoginCallback(function () { txv.vip.getVipInfo().done(function (i) { g = i }) }), txv.login.addLogoutCallback(function () { g = { vip: -1 } }), 48888 == COVER_INFO.columnid && $.extend(y, { playerType: "flash" }), setTimeout(function () { s.pullService() }, 1e4); var m = !1, x = ("function" == typeof history.pushState, null); r.on("tvp-seekto", function (i) { return _ && _.isApiExist("seekTo") && m ? void _.seekTo(i) : void (x && _.getVid() != x || (x = _.getVid(), setTimeout(function (i) { r.emit("tvp-seekto", i) }.bind(this, i), 1500))) }), r.on("tvp-play", function () { _ && _.play() }), r.on("tvp-pause", function () { _ && _.pause() }), r.on("tvp-togglePlayPause", function () { _ && _.togglePlayPause() }), r.on("tvp-seekRight", function (i) { i = i || 5, _ && "function" == typeof _.seekRight && _.seekRight(i) }), r.on("tvp-seekLeft", function (i) { i = i || 5, _ && "function" == typeof _.seekLeft && _.seekLeft(i) }), r.on("tvp-toggleWindowFullScreen", function () { _ && "function" == typeof _.toggleWindowFullScreen && _.toggleWindowFullScreen() }), r.on("followChange", function (i) { txv.log.log("isFollowed:" + i), _ ? _.trigger("followStateChange", { state: i }) : setTimeout(function (t) { r.emit("followChange", { state: i }) }.bind(this, i), 1500) }), r.on("tvp-brandStatusUpdate", function (i) { txv.log.log("isFollowed:" + i), _ ? _.trigger("brandStatusUpdate", i) : setTimeout(function (t) { r.emit("tvp-brandStatusUpdate", i) }.bind(this, i), 1500) }), r.on("tvp-bulletStatus", function (i) { txv.log.log(" bulletStatus isOn:" + i), _ ? i ? _.openBullet() : _.closeBullet() : setTimeout(function (i) { r.emit("tvp-bulletStatus", i) }.bind(this, i), 1500) }), r.on("tvp-setSmallWindowMode", function (i) { txv.log.log(" isSmall " + i), _ ? _.setSmallWindowMode(i) : setTimeout(function (i) { r.emit("tvp-setSmallWindowMode", i) }.bind(this, i), 1500) }), r.on("tvp-toggleSideBarBtnClick", function (i) { try { if (txv.log.log(" sidebar state :  " + i), _) { if (!_.setTheaterMode) return; _.setTheaterMode("hide" == i) } else setTimeout(function (i) { r.emit("tvp-toggleSideBarBtnClick", i) }.bind(this, i), 1500) } catch (t) { console.log(t) } }), r.on("tvp-setNextVid", function (i) { txv.log.log("tvp-setNextVid :  "), txv.log.log(i), _ && _.isApiExist("setNextVid") && _.isApiExist("getVid") ? i.curVid == _.getVid() && _.setNextVid(i) : setTimeout(function (t) { r.emit("tvp-setNextVid", i) }, 1500) }), txv.login.addOpenLoginCallback(function () { try { _.isBrowserFullscreen() ? _.exitBrowserFullscreen() : _.isWindowFullscreen && _.exitWindowFullscreen() } catch (i) { } }), i.exports = { play: function (i) { function t(i) { _ ? _.isApiExist("play") ? _.play(i) : r.on("tvp-ready", function () { _.play.call(_, i) }) : o(i) } var n = i.vid; v(n, function (e) { playCfg = $.extend({}, i, e, { vid: n }), t(playCfg) }) }, getTxplayer: function () { return _ }, destroyTxplayer: function () { _ && _.destroy(), _ = null }, getConfig: function () { return y } } }, function (i, t, n) { "use strict"; function e() { this._evtObjs = {}, this._outdatedMsgs = {} } function o() { } var r = n(4); e.prototype.on = function (i, t, n) { this._evtObjs[i] || (this._evtObjs[i] = []), this._evtObjs[i].push({ handler: t, once: n }); var e = this; return function () { e.off(i, t) } }, e.prototype.wait = function (i, t) { return this._outdatedMsgs[i] ? (t.apply(null, this._outdatedMsgs[i]), o) : this.on(i, t, !0) }, e.prototype.off = function (i, t) { var n, e = this; return n = i ? [i] : r.keys(this._evtObjs), r.forEach(n, function (i) { if (t) { var n = e._evtObjs[i] || [], o = []; r.forEach(n, function (i) { i.handler !== t && o.push(i) }), e._evtObjs[i] = o } else e._evtObjs[i] = [] }), this }, e.prototype.emit = function (i) { var t = Array.prototype.slice.call(arguments, 1); this._outdatedMsgs[i] = t; var n = this._evtObjs[i] || []; r.forEach(n, function (i) { i.once && i.called || (i.called = !0, i.handler && i.handler.apply(null, t)) }) }, e.prototype.emitAsync = function () { var i = arguments, t = this; setTimeout(function () { t.emit.apply(t, i) }, 0) }, e.prototype.assign = function (i) { var t = this; r.forEach(["on", "off", "wait", "emit", "emitAsync"], function (n) { var e = t[n]; i[n] = function () { return e.apply(t, arguments) } }) }, (new e).assign(e), i.exports = e }, function (i, t) { "use strict"; function n(i, t) { return i && i.hasOwnProperty && i.hasOwnProperty(t) } function e() { var i; return i = function () { setTimeout.apply(window, arguments) } } var o = void 0, r = { escape: function (i) { return i ? String(i).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/'/g, "&#39;").replace(/"/g, "&quot;") : "" }, type: function (i) { if (null === i) return "null"; if (i === o) return "undefined"; var t = /\[object (\w+)\]/.exec(Object.prototype.toString.call(i)); return t ? t[1].toLowerCase() : "" }, keys: function (i) { var t = []; return i ? Object.keys ? Object.keys(i) : (this.objEach(i, function (i) { t.push(i) }), t) : t }, bind: function (i, t) { return i.bind ? i.bind(t) : function () { return i.apply(t, arguments) } }, extend: function (i) { if ("object" != this.type(i) && "function" != this.type(i)) return i; for (var t, e, o = 1, r = arguments.length; o < r; o++) { t = arguments[o]; for (e in t) n(t, e) && (i[e] = t[e]) } return i }, trim: function (i) { return i.trim ? i.trim() : i.replace(/^\s+|\s+$/gm, "") }, indexOf: function (i, t) { if (i.indexOf) return i.indexOf(t); var n = -1; return r.some(i, function (i, e) { if (i === t) return n = e, !0 }), n }, forEach: function (i, t) { if (i.forEach) return i.forEach(t); for (var n = i.length, e = 0; e < n; e++)t(i[e], e); return i }, some: function (i, t) { if (i.some) return i.some(t); for (var n = i.length, e = !1, o = 0; o < n; o++)if (t(i[o], o)) { e = !0; break } return e }, map: function (i, t) { if (i.map) return i.map(t); for (var n = i.length, e = [], o = 0; o < n; o++)e.push(t(i[o], o)); return e }, objEach: function (i, t) { if (i) for (var e in i) if (n(i, e) && t(e, i[e]) === !1) break }, reduce: function (i, t) { if ("function" != r.type(t)) throw new TypeError("Array.prototype.reduce callback must be a function"); var n = i.length; if (0 === n && 2 === arguments.length) throw new TypeError("reduce of empty array with no initial value"); var e, o = 0; if (arguments.length >= 3) e = arguments[2]; else for (; ;) { if (o in i) { e = i[o++]; break } if (++o >= n) throw new TypeError("reduceRight of empty array with no initial value") } for (; o < n; o++)e = t(e, i[o], o, i); return e }, filter: function (i, t, n) { if (i.filter) return i.filter(t); for (var e = i.length, o = [], r = 0; r < e; r++) { var a = i[r]; t.call(n, a, r, i) && o.push(a) } return o }, nextTick: e(), lock: function (i) { var t; return function () { if (!t) { t = !0; var n = [].slice.call(arguments, 0); n.unshift(function () { t = !1 }), i.apply(this, n) } } }, queue: function (i, t) { function n() { var i = e.shift(); if (!i) return void (o = t); o--; var a = i[0], c = i[1], s = i[2]; s.unshift(function () { o++ , n.apply(this, arguments) }), r.nextTick(function () { return a.apply(c, s) }) } t = t || 1; var e = [], o = t; return function () { if (e.push([i, this, [].slice.call(arguments, 0)]), o) return n() } }, delegator: function (i) { var t, n = []; return function (e) { return t ? n.push(e) : (t = !0, void i.call(this, function () { t = !1; var i = this, o = arguments; e && e.apply(i, o), r.forEach(n, function (t) { t && t.apply(i, o) }) })) } }, once: function (i) { var t, n = arguments; return function () { if (!t && i) return t = !0, i.apply(n.length >= 2 ? n[1] : null, arguments) } } }; i.exports = r }, function (i, t, n) { var e = window.PageMsg, o = n(6), r = {}; $.each(o, function (i, t) { r[t] = $.Callbacks("unique memory"), e.on(t, function (i) { r[t].fire(i) }) }), i.exports = function (i, t) { r[i].add(t) } }, function (i, t) { i.exports = ["tvp-ready", "tvp-adStart", "tvp-adEnd", "tvp-skipad", "tvp-toggleSideBar", "tvp-timeupdate", "tvp-winfullscreen", "tvp-browserfullscreen", "tvp-brandsubscribe"] }, function (i, t, n) { var e = n(8), o = (n(22), n(16), n(23)), r = n(25), a = n(29), c = n(32), s = n(9), p = n(33), l = !1, d = function (i, t) { i.on("tvp-skipad", function () { t && (a(t), s.click(COVER_INFO.typeid + "_vip_skipad:showOpenVip")) }), i.on("tvp-playend", function (i) { l && p(), l = !1 }), i.on("tvp-showUIVipGuide", function (i) { if (t) if (i.trialFinish) p(); else if (i.switchDefinitionFail) c(t), s.click(COVER_INFO.typeid + "_vip_1080p:showOpenVip"); else if (i.openvip) if ("singlebuy" === txv.vip.playerTipsEvent) r(); else if ("useticket" === txv.vip.playerTipsEvent) o(); else { var n = { _source: 2, _scene: 8, _cid: COVER_INFO.id, _vid: VIDEO_INFO.vid, aid_version: "V0" }; !txv.login.isLogin() || "qq" == txv.login.getLoginType() && txv.login.isLowLogin() ? txv.login.openPayLogin({ isLowLogin: txv.login.isLowLogin(), success: function () { txv.vip.getVipInfo().done(function (i) { var t = i; t.vip || "qq" != txv.login.getLoginType() ? t.vip && "wx" == txv.login.getLoginType() && txv.login.bye_login() : $.pay(n) }) } }) : $.pay(n), s.click(COVER_INFO.typeid + "_vip_playertips:openMinipay") } }), t.on("playerEmitCommonMsg", function (i) { "accountBannedTip" === i.type && ("open_account" == i.data.name ? e.show_layer() : "change_account" == i.data.name ? (txv.login.addLoginCallback(function () { window.location.reload() }), txv.login.openLogin()) : window.open(i.data.url)) }) }; i.exports = d }, function (i, t, n) { function e() { if (document.getElementById("ff_poptip")) return 1; var i = ""; i = '<div class="mod_player_popbox mod_popup_v2" data-ptag="new_reactive" id="ff_poptip">', i += '\t<iframe frameborder="0" allowtransparency="true" class="iframe_wrap" id="frm_poptip" src="//film.qq.com/priv/newplayer_reactive.html" scrolling="no" style="width: 480px; height: 270px;"></iframe>', i += "</div>", $("body").append(i), r.showFixedWindow("#ff_poptip", 480, 270), $("#ff_poptip").off("close").on("close", function () { return o.click(a + "closeReactiveLayer"), $("#ff_poptip").remove(), txv.login.hideMask(), !1 }), $("#frm_poptip").off("load").on("load", function () { txv.login.showMask() }) } var o = n(9), r = n(16), a = "vip_trialover:"; i.exports = { show_layer: e } }, function (i, t, n) { "use strict"; function e() { return v || window.jQuery || window.$ } function o(i, t) { return u.hot([y, "event", i, t].join(".")), this } function r(i, t, n) { return u.hot([y, "click", i, t, n].join(".")), this } function a(i) { return u.hot([y, "pageview", i].join(".")), this } function c(i, t) { return u.hot([y, "stat", i, t].join(".")), this } function s(i) { return "array" !== _.type(i) ? "" : _.map(i, function (i) { return _.map(i, function (i) { return encodeURIComponent(i) }).join(",") }).join("|") } function p(i) { return "string" != typeof i ? [] : _.map(i.split("|"), function (i) { return _.map(i.split(","), function (i) { return decodeURIComponent(i) }) }) } function l(i, t) { switch (i) { case "click": r.apply(this, t); break; case "pageview": a.apply(this, t); break; case "event": o.apply(this, t); break; case "stat": c.apply(this, t) } } function d(i) { var t = Array.prototype.slice.call(arguments, 1); if (f) try { var n = localStorage.getItem(m); try { n = p(n) } catch (e) { } return "array" !== _.type(n) && (n = []), n.push([i].concat(t)), void localStorage.setItem(m, s(n)) } catch (e) { } l(i, t) } var v, u = n(10), _ = n(4), f = "localStorage" in window && null !== window.localStorage, g = "index", y = "vplay", m = y + "_lazy_reports"; i.exports = { setPage: function (i) { return g = i, this }, setJQ: function (i) { return v = i, this }, bind2d: function (i, t, n) { var o = e(); return o(i).on("click", "[" + n + "]", function (i) { for (var e, a = i.currentTarget, c = o(a).attr(n), s = 10; s && a && !(e = o(a).attr(t));)s-- , a = a.parentNode; e && r(g, e, c) }), this }, bind: function (i, t) { var n = e(); return n(i).on("click", "[" + t + "]", function (i) { var e = i.currentTarget, o = n(e), a = o.attr(t); if ("A" == e.tagName) { var c = o.attr("href"), s = o.attr("target"); if (!/^(javascript:|#)/.test(c) && !s) return void d("click", g, a, "") } r(g, a, "") }), this }, click: function (i) { return r(g, i, "") }, event: function (i) { return o(g, i) }, stat: function (i) { return c(g, i) }, flush: function () { if (localStorage) try { var i = localStorage.getItem(m); localStorage.removeItem(m), i && (i = p(i), _.forEach(i, function (i) { l(i[0], i.slice(1)) })) } catch (t) { } }, pv: a } }, function (i, t, n) { "use strict"; function e() { return g + "&_dc=" + Math.random() } function o() { function i() { return Math.floor(65536 * (1 + Math.random())).toString(16).substring(1) } return [i(), i(), i(), i()].join("") } function r() { var i = p.get("tvfe_boss_uuid"); if (!i) { i = o(); try { p.set("tvfe_boss_uuid", i, "qq.com", !1, 87600) } catch (t) { p.set("tvfe_boss_uuid", i, "", !1, 87600) } } return i } function a(i, t) { i = i.split("."), (i.length < 3 || i.length > 5) && console.warn("按钮名分段数不对，可能会导致数据丢失"); var n = e(); n += "&s_ptag=" + _ + "&s_app=" + (i[0] || "") + "&s_module=" + (i[1] || "") + "&s_behave=" + (i[2] || "") + "&s_sub=" + (i[3] || "") + "&s_fifth=" + (i[4] || ""), t && t.lazy ? d.push(n) : l(n) } var c, s = n(11), p = n(13), l = n(14), d = n(15); try { c = window.jQuery || window.Zepto || window.tvp && tvp.$ } catch (v) { } c && c(document.body).on("click", "[_boss]", function (i) { var t = c(i.currentTarget); a(t.attr("_boss")) }); var u = window.sessionStorage || { getItem: function () { return "" } }, _ = s.get("ptag") || u.getItem("ptag") || p.get("ptag"), f = s.get("openid") || p.get("openid"), g = "//btrace.qq.com/kvcollect?BossId=3255&Pwd=2118551257&s_url=" + encodeURIComponent(location.href.split("?")[0]) + "&s_referrer=" + encodeURIComponent(document.referrer) + "&s_ua=" + navigator.userAgent + "&s_uuid=" + r() + "&s_uin=" + (p.get("o_cookie") || p.get("uin") || p.get("luin")) + "&s_openid=" + f; i.exports = { ptag: function (i) { _ = i }, hot: a, uid: r } }, function (i, t, n) { "use strict"; var e = n(12); i.exports = { get: function (i, t) { var n = new RegExp("(\\?|#|&)" + i + "=([^&#]*)(&|#|$)"); t = t || location.href; var o = t.match(n); return o ? e(o[2]) : "" }, del: function (i) { var t = new RegExp("(\\?|#|&)" + i + "=([^&#]*)(&|#|$)"), n = location.href.match(t); n = n ? n[2] : ""; try { window.history && history.replaceState && history.replaceState(null, null, location.href.replace(i + "=" + n, "")) } catch (e) { } } } }, function (i, t) { var n = { "<": "&#60;", ">": "&#62;", '"': "&#34;", "'": "&#39;", "&": "&#38;" }, e = function (i) { return n[i] }; i.exports = function (i) { return ("" + i).replace(/&(?![\w#]+;)|[<>"']/g, e) } }, function (i, t) { "use strict"; i.exports = { set: function (i, t, n, e, o) { if (o) { var r = new Date, a = new Date; a.setTime(r.getTime() + 36e5 * o) } return document.cookie = i + "=" + t + "; " + (o ? "expires=" + a.toGMTString() + "; " : "") + (e ? "path=" + e + "; " : "path=/; ") + (n ? "domain=" + n + ";" : "domain=" + window.location.host + ";"), !0 }, get: function (i, t) { var n = new RegExp("(?:^|;+|\\s+)" + i + "=([^;]*)"), e = (t || document.cookie).match(n); return e ? e[1] : "" }, del: function (i, t, n) { var e = new Date; e.setTime(e.getTime() - 1), document.cookie = i + "=; expires=" + e.toGMTString() + ";" + (n ? "path=" + n + "; " : "path=/; ") + (t ? "domain=" + t + ";" : "domain=" + window.location.host + ";") } } }, function (i, t) { "use strict"; function n() { } i.exports = function (i) { var t = document.createElement("img"); t.onerror = n, t.onload = n, t.onabort = n, t.src = i } }, function (module, exports, __webpack_require__) { var cookie = __webpack_require__(13), report = __webpack_require__(14), storage = function () { var i = !1; try { window.localStorage && (i = !0) } catch (t) { } var n = location.hostname || location.host; return i ? { get: function (i) { return localStorage.getItem(i) }, set: function (i, t) { return localStorage.setItem(i, t) }, clear: function (i) { return localStorage.removeItem(i) } } : { get: function (i) { return cookie.get(i) }, set: function (i, t) { return cookie.set(i, t, n) }, clear: function (i) { return cookie.set(i, "", n) } } } (), reg = /^(?:ht|f)tp(?:s)?\:\/\/(?:[\w\-\.]+)\.\w+/i, k = "txv_lazyreport_list", d = "|", clear = function () { return storage.clear(k) }, shift = function () { var i = storage.get(k); if (!i) return ""; var t = i.split(d), n = t.shift(); return storage.set(k, t.join(d)), n ? decodeURIComponent(n) : "" }, push = function (i) { if (i) { var t = storage.get(k), n = []; t && (n = t.split(d)), n.push(encodeURIComponent(i)), storage.set(k, n.join(d)) } }, reportItem = function (item) { if (reg.test(item)) try { !!report && report(item) } catch (e) { } else setTimeout(function () { try { eval(item) } catch (e) { } }, 0) }, _report = function () { for (var i = shift(); i;)reportItem(i), i = shift() }; module.exports = { push: push, clear: clear, report: _report } }, function (i, t, n) { var e, o = n(9), r = n(17), a = n(18), c = n(19), s = n(20), p = { userTicket: null, eventText: null, isVip: null, vipInfo: null, bindAccount: null }, l = function () { p = { userTicket: null, eventText: null, isVip: null, vipInfo: null, bindAccount: null } }, d = function (i) { var t = i.split(" "), n = t[0].split("-"), e = t[1].split(":"), o = new Date(n[0], n[1] - 1, n[2], e[0], e[1], e[2]); return Math.ceil((o.getTime() - new Date) / 864e5) }, v = function (i) { var i = i + ""; return 1 === i.length && (i = "0" + i), i }, u = function (i) { var t = new Date, n = t.getTime() + 864e5 * parseInt(i, 10); return t.setTime(n), t.getFullYear() + "-" + v(t.getMonth() + 1) + "-" + v(t.getDate()) + " " + v(t.getHours()) + ":" + v(t.getMinutes()) + ":" + v(t.getSeconds()) }, _ = function (i) { var t = new Date(i.replace(/-/g, "/")); return t.getTime() > (new Date).getTime() }, f = function (i, t, n, e) { if (i) { var o, r = window == top, a = r ? document : top.document, c = a.body.scrollTop, s = a.documentElement.clientHeight, p = $(i); t = t || p.width() || 373, n = n || p.height() || 235, e = e === !1, 0 == c && (c = a.documentElement.scrollTop), 0 == s && (s = a.body.clientHeight), o = parseInt(p.css("zIndex")), p.css({ width: t + "px", height: n + "px", top: "50%", left: "50%", marginLeft: -t / 2 + "px", marginTop: -n / 2 + "px", position: "fixed", zIndex: o || "10001", display: "block" }) } }, g = function (i) { return null !== p.userTicket ? void i(p.userTicket) : void $.ajax({ url: "//pay.video.qq.com/fcgi-bin/user_ticket", dataType: "jsonp", data: { uin: txv.login.getUin(), status: 1, psize: 10, _t: 5, otype: "json", platform: 1 }, CSRF: !0, success: function (t) { 0 === t.result.code ? (p.userTicket = t.not_use, i(t.not_use)) : i(0) }, error: function () { i(0) } }) }, y = function (i) { $.ajax({ url: "//pay.video.qq.com/fcgi-bin/pay?otype=json", dataType: "jsonp", CSRF: !0, data: { id: COVER_INFO.id, uin: txv.login.getUin() }, success: function (t) { return 0 == t.result.code && 1 == t.pay ? void i(!0, t) : void i(!1) }, error: function () { i(!1) } }) }, m = function (i) { return null !== p.eventText ? void i(p.eventText) : void $.ajax({ url: "//pay.video.qq.com/fcgi-bin/get_config?name=457324&otype=json", dataType: "jsonp", success: function (t) { t.event && "" !== t.event ? (i(t.event), p.eventText = t.event) : (i(""), p.eventText = "") }, error: function () { i("") } }) }, x = function (i) { var t = i / 100 + ""; return t }, h = function (i) { var t = i.match(/^(\d+)-(\d+)-(\d+) (\d+):(\d+):(\d+)$/); return !(!t || !t[5]) && t[2] + "月" + t[3] + "日 " + t[4] + ":" + t[5] }, w = function (i) { var t = i.match(/^(\d+)-(\d+)-(\d+) (\d+):(\d+):(\d+)$/), n = new Date; n.setFullYear(t[1]), n.setMonth(t[2]), n.setDate(t[3]), n.setHours(t[4]), n.setMinutes(t[5]), n.setSeconds(t[6]); var e = (new Date).getTime(); return e > n.getTime() }, k = function (i) { var t = { 1306029: "0分钟", 1306030: "5分钟", 1306031: "10分钟", 1324045: "1分钟", 1324046: "2分钟", 1324047: "3分钟", 1324048: "4分钟" }; return t[i] ? t[i] : "未知时间" }, V = function (i) { return null !== p.isVip ? void i(p.isVip, p.vipInfo) : void txv.vip.getVipInfo().done(function (t) { t.vip ? (i(!0, t), p.isVip = !0) : (i(!1, t), p.isVip = !1), p.vipInfo = t }).fail(function () { i(!1, {}) }) }, O = function (i) { $.ajax({ url: "//pay.video.qq.com/fcgi-bin/pay", dataType: "jsonp", CSRF: !0, data: { id: COVER_INFO.id, uin: txv.login.getUin(), otype: "json", isneedmovie: 1 }, success: function (t) { t.valid_days ? i(t.valid_days) : txv.tips.Msg({ title: "影片数据读取错误，请刷新重试", buttons: ["刷新"] }).done(function () { window.location.reload() }) }, error: function () { txv.tips.Msg({ title: "影片数据读取错误，请刷新重试", buttons: ["刷新"] }).done(function () { window.location.reload() }) } }) }, b = function (i, t) { var n = $.extend({ aid_version: "V0", key4: 9, key11: 2, _scene: 2 }, t), e = $.pay(n, "aid"); $.pay_qrimg({ id: i, pay_type: 0, use_ws: !1, aid: e, scan_suc: function () { o.click("vip_layer:scanSucc") }, pay_suc: function () { window.location.reload() } }) }, I = function (i) { "undefined" == typeof $.pay ? $.getScript("//vm.gtimg.cn/tencentvideo_v1/script/vip.minipay.js", function () { i() }) : i() }, E = function () { txv.login.addCloseLoginCallback(function () { 0 !== $(".mask_layer").length && 1 !== $(".mask_layer:hidden").length || 1 !== $(".tvip_layer").length || txv.login.showMask() }) }, N = function (i) { return null !== p.bindAccount ? void i(p.bindAccount) : void $.ajax({ url: "//pay.video.qq.com/fcgi-bin/check_bindaccount?otype=json", dataType: "jsonp", CSRF: !0, success: function (t) { return t && t.result && 0 == t.result.code && 1 == t.isVip ? (i(t), void (p.bindAccount = t)) : (i(!1), void (p.bindAccount = !1)) }, error: function (t) { i(!1) } }) }, F = function (i, t, n) { N(function (e) { if (e) { if (i.find(".tvip_content").append(r), "wx" === e.bind_type) var o = "您的微信帐号 " + e.account_id + "已是会员，"; else var o = "您的QQ帐号 " + e.account_id + "已是会员，"; i.find("#bind_account_row .tvip_change_txt").html(o), i.find("#bind_account_row .tvip_login_txt").unbind("click").bind("click", function () { return txv.login.openLoginSingle({ success: function () { window.location.reload() } }, e.bind_type), !1 }), t && t() } else n && n() }) }, C = !1, P = function (i) { i.find("#pc_client_open, #pc_client_down").length > 0 || txv.ua.windows && s.isPcClientExist().then(function () { i.find(".tvip_content").append(c), i.find("#pc_client_open").unbind("click").bind("click", function () { return s.openClient(1, "web.vip"), !1 }).show() }).fail(function () { i.find(".tvip_content").append(a); var t = i.find("#pc_client_down"); t.unbind("click").bind("click", function () { return console.log("down"), location.href = "//node.video.qq.com/x/api/download_pc", !1 }).show(), txv.ua.ie ? !C && txv.clipboard ? (C = !0, e = txv.clipboard.to({ el: t[0], text: "qqlivechannel=channel1.vip" })) : e && e.bindEl(t) : txv.clipboard && txv.clipboard.to({ el: t[0], text: "qqlivechannel=channel1.vip" }) }) }, T = function () { return 2 == COVER_INFO.typeid ? (COVER_INFO.episodeVip = parseInt(COVER_INFO.episodeVip, 10), COVER_INFO.episodeCurrent = parseInt(COVER_INFO.episodeCurrent, 10), COVER_INFO.episodeAll = parseInt(COVER_INFO.episodeAll, 10), COVER_INFO.episodeVip == COVER_INFO.episodeCurrent && COVER_INFO.episodeCurrent < COVER_INFO.episodeAll ? "开通VIP会员免费看" : COVER_INFO.episodeCurrent < COVER_INFO.episodeAll ? "开通VIP会员抢先看" : "开通VIP会员看全集") : "开通VIP会员免费看" }; i.exports = { clearCache: l, checkPaid: y, getUserTicket: g, getEventText: m, getExpireDays: d, getFormatPrice: x, getTrailerDate: h, isBeforDate: w, getTryTime: k, getVipInfo: V, showFixedWindow: f, getVideoDays: O, getExpDate: u, setQrImage: b, loadMinipayJS: I, checkLoginMask: E, checkBindAccount: F, checkPcClient: P, getOpenVIPText: T, isLateDate: _ } }, function (i, t) { i.exports = '<div class="tvip_ft" id="bind_account_row">\r\n    <div class="tvip_change_login">\r\n        <span class="tvip_change_txt">你的微信帐号learzheng已是VIP会员，</span>\r\n        <a class="tvip_login_txt" href="javascript:;">切换登录</a>\r\n    </div>\r\n</div>' }, function (i, t) { i.exports = '<div class="tvip_ft tvip_ft_btn" id="pc_client_down">\r\n    <a class="tvip_btn_pcdown" href="javascript:;"><span class="tvip_icon_down"></span><span class="tvip_down_txt">下载PC客户端，免费享1080P</span></a>\r\n</div>' }, function (i, t) { i.exports = '<div class="tvip_ft tvip_ft_btn" id="pc_client_open">\r\n    <a class="tvip_btn_pcdown" href="javascript:;"><span class="tvip_icon_play"></span><span class="tvip_down_txt">用PC客户端看，免费享1080P</span></a>\r\n</div>' }, function (i, t, n) {
    function e(i, t) { return a.open(o(i, t)) } function o(i, t) { var n = COVER_INFO.id, e = s; if (i && 1 == i) { var o = "qqlive://sso/"; if (n) { var r = n; /^\d+$/i.test(r) ? o += "projectid=" + r : r.toLowerCase().indexOf("qqlive://sso/") >= 0 ? o = r : /^[a-z0-9]{15}$/i.test(r) && (o += "vbarid=" + r) } return e && (o = txv.util.addUrlParam({ videoid: e }, o)), o = txv.util.addUrlParam({ start: 0, atag: t, stag: -1 != navigator.userAgent.indexOf("QQLive") ? "Playpage.Pcclient" : "Playpage.web" }, o), o = o.replace("?", "&") } var a = "qqlive://download/videoid=" + e; return n && (a = "qqlive://download/vbarid=" + n + "&vlist=" + e), a += "&atag=" + t } function r() { if (txv.ua.chrome) for (var i = 0; i < navigator.plugins.length; i++)if ("Chrome PDF Viewer" == navigator.plugins[i].name) return !0 } var a = n(21), c = window.PageMsg, s = VIDEO_INFO.vid; c.on("vidChanged", function (i) { s = i.vid }), c.wait("vidChanged", function (i) { s = i.vid }); var p, l = function () { var i = $.Deferred(); return $.ajax({ url: "//sns.video.qq.com/fcgi-bin/dlib/dataout", data: { auto_id: 2332, otype: "json" }, CSRF: !0, dataType: "jsonp" }).done(function (t) { t && 0 == t.returncode ? i.resolve(t) : i.reject(t) }).fail(function (t) { i.reject(t) }), i }, d = function (i, t, n) {
        var e = 1 == i || 2 == i; if (r() && e) { var o = "fixed_download_close", a = $('<div class="mod_fixed_download"><div class="fixed_download"><a class="' + o + '" href="javascript:void(0);">×</a></div></div>'); a.find("." + o).bind("click", function () { a.remove() }), $("body").append(a) } else switch (i) {
            case 1: txv.tips.FloatWarning({ title: "未检测到腾讯视频客户端，安装后可在客户端观看", useMask: !1 }); break; case 2: txv.tips.FloatWarning({ title: "未检测到腾讯视频客户端，安装后马上为您下载本片", useMask: !1 }); break; default: txv.tips.FloatWarning({
                staySecond: 5, title: '自动下载失败，请 <a href="' + location.protocol + "//v.qq.com/download.html?ptag=" + (1 == t ? "PCwatch" : "PCdownload") + '" target="_blank" _hot="cover.download.' + (1 == t ? "PCwatch" : "PCdownload") + '">点这里下载</a>'
            })
        }clearTimeout(p), e && (p = setTimeout(function () { n ? window.location.assign(n) : l().then(function (i) { window.location.assign(i.url) }, function () { d(-1, i) }) }, 2e3))
    }; i.exports = { isPcClientExist: a.exist, openClient: e, pullService: a.pull, showPopAlert: d }
}, function (i, t) { function n(i) { p = !1; var t = l, n = t.shift(); for (l = []; n;)n(i), n = t.shift() } function e(i) { txv.client ? i(txv.client) : p ? l.push(i) : (p = !0, l.push(i), $.getScript("//vm.gtimg.cn/tencentvideo_v1/script/module/txv.client1_0_4.js", function () { p && n(txv.client) }), setTimeout(function () { p && n() }, 3e3)) } function o(i) { var t = v, n = t.shift(); for (v = []; n;)i ? n.resolve(i) : n.reject(), n = t.shift(); d = !1 } function r(i, t, n) { var r = $.Deferred(); return v.push(r), d || (d = !0, e(function (e) { e ? e.exist(i, t, n).done(function (i) { o(i) }).fail(function () { o() }) : o() })), r } function a(i, t, n, o) { var r = $.Deferred(); return e(function (e) { e ? e.open(i, t, n, o).done(function () { r.resolve() }).fail(function () { r.reject() }) : r.reject() }), r } function c() { var i = $.Deferred(); return e(function (t) { t ? t.pull().done(function () { i.resolve() }).fail(function (t) { i.reject(t) }) : i.reject(-1) }), i } function s() { return r(!0, !1, !0) } var p = !1, l = [], d = !1, v = []; i.exports = { exist: r, open: a, pull: c, hasService: s } }, function (i, t) { var n = { SINGLE_BUY: 7, VIP_MONTHLY: 5, VIP_ONLY: 6, VIP_TICKET: 4 }; i.exports = n }, function (i, t, n) { var e = n(16), o = n(24), r = (window.PageMsg, n(9)), a = function (i) { var t = $({}); t.attr("data-toggle", "l_pay"), t.attr("data-amount", "3"), t.attr("_source", "10"), t.attr("_scene", "8"), t.attr("_stat", "vip_player:openVip"); var n = t.pay("aid"); $.ajax({ url: "//pay.video.qq.com/fcgi-bin/ticket_trade", dataType: "jsonp", data: { uin: txv.login.getUin(), cid: COVER_INFO.id, pid: 10001, pchannel: "nomoney", money: 0, title: COVER_INFO.title, otype: "json", days: i, tcount: 0, aid: n, platform: 1, version: "film" }, CSRF: !0, success: function (i) { 0 == i.ret ? window.location.reload() : i.ret == -11 ? txv.login.openLogin({ success: function () { txv.cookie.set("vip_useticket", "1"), window.location.reload() } }) : txv.tips.Msg({ title: i.msg_title + " " + i.msg_desc }) } }), r.click(COVER_INFO.typeid + "_vip_ticket:showLayer") }, c = function (i, t, n) { $("body").append(o), e.showFixedWindow(".tvip_layer", 540, 225), txv.login.showMask(); var r = $(".tvip_layer"); r.find(".tvip_close").unbind("click").bind("click", function () { return r.find("a").unbind("click"), r.remove(), txv.login.hideMask(), !1 }), r.find("#ticket_left_count").html(t + " 张"); var a = e.getExpDate(i); r.find("#ticket_valid_date").html(i + "天内无限次观看（至" + a + "）"), r.find("a.tvip_btn_vip").unbind("click").bind("click", function () { return n && n(), !1 }) }, s = function (i) { e.getVideoDays(function (t) { $.ajax({ url: "//pay.video.qq.com/fcgi-bin/user_ticket", dataType: "jsonp", data: { uin: txv.login.getUin(), status: 1, psize: 30, _t: 1, otype: "json", platform: 1 }, CSRF: !0, success: function (n) { if (n.result.code === -11) return void txv.login.openLogin({ success: function () { txv.cookie.set("vip_useticket", "1"), window.location.reload() } }); if (0 == n.result.code) { var e = n.vip_tt + n.watch_tt; c(t, e, function () { a(t) }), i && i() } }, error: function () { txv.tips.Msg({ title: "观影券数据读取错误，请刷新重试", buttons: ["刷新"] }).done(function () { window.location.reload() }) } }) }) }; i.exports = s }, function (i, t) { i.exports = '<div class="tvip_layer">\r\n    <iframe style="position: absolute;top: 0;left: 0;width: 100%;height: 100%;z-index: 1;"></iframe>\r\n    <div class="tvip_content">\r\n        <div class="tvip_hd">\r\n           <a href="javascript:;" class="tvip_close" title="关闭">关闭</a> \r\n        </div>\r\n        <div class="tvip_bd">\r\n            <!--用券结构-->\r\n            <div class="tvip_box_coupon">\r\n                <div class="tvip_coupon_tit">用券可观看完整影片</div>\r\n                <div class="tvip_tickets_list">\r\n                    <div class="tvip_tickets_item">\r\n                        <span class="tvip_tickets_tit">剩余观影券：</span>\r\n                        <span class="tvip_tickets_txt" id="ticket_left_count">2 张</span>\r\n                    </div>\r\n                    <div class="tvip_tickets_item">\r\n                        <span class="tvip_tickets_tit">本次使用：</span>\r\n                        <span class="tvip_tickets_txt"><span class="tvip_txt_red">1</span> 张</span>\r\n                    </div>\r\n                    <div class="tvip_tickets_item">\r\n                        <span class="tvip_tickets_tit">观影有效期：</span>\r\n                        <span class="tvip_tickets_txt" id="ticket_valid_date">2天内无限次观看（至2016-05-06 20:05:55）</span>\r\n                    </div>\r\n                </div>\r\n                <a class="tvip_btn_vip" href="javascript:;"><span class="tvip_btn_txt">立即使用</span></a>\r\n                <a class="tvip_btn_link" href="javascript:;" style="display:none;"><span class="tvip_icon_vip"></span><span class="tvip_btn_txt">开通VIP会员免费</span><span class="tvip_txt_red">买4送2</span></a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>' }, function (i, t, n) { var e = n(26), o = n(27), r = (window.PageMsg, function (i, t) { }), a = function () { function i(i) { var n = new Image, e = ""; $.each(i, function (i, t) { e += i + "=" + t + "&" }), e += "rand=" + Math.random(), n.src = t + "?" + e } if ("wx" == txv.login.getLoginType()) return void o(); txv.login.showMask(); var t = "//pay.video.qq.com/fcgi-bin/payreport"; !function (t) { var n = !1; (new Date).getTime(); t.off("success").on("success", function () { n = !0, i({ plat: 0, step: 6, uin: txv.login.getUin(), code_1: 0, type: 2, payitem: "1*" + COVER_INFO.id }) }).off("close").on("close", function () { n && setTimeout(function () { window.location.reload() }, 1e3), txv.login.hideMask() }).off("cancel").on("cancel", function () { txv.login.hideMask(), i({ plat: 0, step: 7, uin: txv.login.getUin(), type: 2, payitem: "1*" + COVER_INFO.id }) }).off("priceerr").on("priceerr", function (i, t) { t.code == -11 ? txv.login.openLogin({ success: function () { window.location.reload() } }) : (txv.login.hideMask(), r("支付失败", "错误码：" + t.code, "错误信息:" + t.msg, "确定", "-500", !0)) }).off("frameload").on("frameload", function () { i({ plat: 0, step: 1, uin: txv.login.getUin(), type: 2, payitem: "1*" + COVER_INFO.id }) }).show({ coverid: COVER_INFO.id, sandbox: !1 }) } (e) }, c = function () { if (txv.login.getLoginType() && txv.login.isStrongLogin()) a(); else { var i = { pay_type: 1, pay_suc: function () { setTimeout(function () { window.location.reload() }, 1e3) }, success: function () { txv.cookie.set("vip_singlebuy", "1"), window.location.reload(); var i = txv.login.getLoginType(); "qq" == i ? a() : "wx" == i && txv.login.bye_login() } }; if ($("#ff_poptip").remove(), txv.login.showMask(), txv.login.isLowLogin()) { var t = txv.login.getLoginType(); "qq" == t ? txv.login.openLoginSingle(i, "qq") : "wx" == t ? txv.login.openLoginSingle(i, "wx") : txv.login.openPayLogin(i) } else txv.login.openPayLogin(i) } }; i.exports = c }, function (i, t) { var n, e = $({}), o = !1, r = "//fusion.qzone.qq.com/fusion_loader?appid=1450000370&platform=website&v=20130717&maxage=864000", a = 1, c = { coverid: "", title: "正在为QQ帐号购买影片", zIndex: 9999, type: "", plat: 1, token: "", key: "", g_tk: "", uin: "", param: null, sandbox: !0, context: this }, s = { onSuccess: function (i) { e.trigger("success", i) }, onCancel: function (i) { e.trigger("cancel", i) }, onClose: function () { e.trigger("close") }, onLoadJsFail: function () { e.trigger("loadjsfail") }, onPriceErr: function (i, t) { e.trigger("priceerr", { code: i, msg: t }) }, onFrameLoad: function () { e.trigger("frameload") }, onShown: function () { e.trigger("shown") }, onLoad: function () { e.trigger("load") } }; e.setConfig = function (i) { return i = i || {}, $.extend(c, i), this }, e.show = function (i) { function t(i, e) { function p(i) { var t = new Image, n = ""; $.each(i, function (i, t) { n += i + "=" + t + "&" }), n += "rand=" + Math.random(), t.src = v + "?" + n } i = i || "pay.video.qq.com", e = e || 0; var d = (["//", i, "/fcgi-bin/price-cloud?otype=json"].join(""), (new Date).getTime()), v = "//pay.video.qq.com/fcgi-bin/payreport"; $.ajax({ url: "//pay.video.qq.com/fcgi-bin/price-cloud?otype=json", dataType: "jsonp", data: l, cache: !1, success: function (i) { if (i && i.result && 0 == i.result.code) { c.param = i.url_params; var t = window.fusion2; t && t.dialog && t.dialog.buy ? n = t.dialog.buy($.extend({}, c, s)) : o || $.getScript(r).done(function () { n = window.fusion2.dialog.buy($.extend({}, c, s)), o = !1 }), p({ plat: 0, step: 4, costtime: (new Date).getTime() - d, cginame: "price-cloud", code_1: i.result.code, msg: i.result.msg, uin: txv.login.getUin(), type: 2, payitem: "1*" + COVER_INFO.id }) } else i && i.result ? (s.onPriceErr(i.result.code, i.result.msg), p({ plat: 0, step: 4, costtime: (new Date).getTime() - d, cginame: "price-cloud", code_1: i.result.code, msg: i.result.msg, uin: txv.login.getUin(), type: 2, payitem: "1*" + COVER_INFO.id })) : (p({ plat: 0, step: 4, costtime: (new Date).getTime() - d, cginame: "price-cloud", code_1: -99, msg: "批价发货请求完成处理时发生错误", uin: txv.login.getUin(), type: 2, payitem: "1*" + COVER_INFO.id }), s.onPriceErr(-99, "批价发货请求完成处理时发生错误")) }, error: function () { e < a ? t("paybak.video.qq.com", ++e) : s.onPriceErr(-500, "批价发货请求发生错误"), p({ plat: 0, step: 4, costtime: (new Date).getTime() - d, cginame: "price-cloud", code_1: -500, msg: "批价发货请求完成处理时发生错误", uin: txv.login.getUin(), type: 2, payitem: "1*" + COVER_INFO.id }) } }) } if (i.title = ["正在为QQ帐号", "（", txv.login.getUin(), "）购买影片"].join(""), e.setConfig(i), !c.coverid) return void c.onPriceErr(-199, "获取专辑id失败"); var p = txv.cookie.get("skey"), l = { cid: c.coverid, g_tk: c.g_tk || (p ? $.time33(p) : ""), num: c.num || 1 }; return c.type && (l.type = c.type), 2 == c.plat && (l.token = c.token, l.key = c.key, l.uin = c.uin, l.plat = c.plat), t(), this }, i.exports = e }, function (i, t, n) { var e = n(28), o = n(16), r = o.getFormatPrice(VIDEO_INFO.vipPrice), a = o.getFormatPrice(VIDEO_INFO.singlePrice), c = function () { $("body").append(e), o.showFixedWindow(".tvip_layer", 540, 299), txv.login.showMask(); var i = $(".tvip_layer"); i.find(".tvip_close").unbind("click").bind("click", function () { return i.find("a").unbind("click"), i.remove(), txv.login.hideMask(), !1 }), i.find(".tvip_wxvod_name").html(txv.login.getWxNick()), i.find(".tvip_wxvod_film").html(COVER_INFO.title), o.getVideoDays(function (t) { i.find(".tvip_wxvod_time").html("观影有效期：" + t + "天内无限次观看（至" + o.getExpDate(t) + ")") }), $.pay_qrimg({ id: "layer_qrcode_img", pay_type: 1, cid: COVER_INFO.id, usewx: 1, use_ws: !0, extendparam: "", pay_suc: function () { window.location.reload() }, scan_suc: function () { } }), o.getVipInfo(function (t, n) { var e = t ? r : a; i.find(".tvv_qr_txt").html("微信扫一扫，" + e + "元购买") }) }; i.exports = c }, function (i, t) { i.exports = '<div class="tvip_layer tvip_layer_wxvod">\r\n    <iframe style="position: absolute;top: 0;left: 0;width: 100%;height: 100%;z-index: 1;"></iframe>\r\n    <div class="tvip_content">\r\n        <div class="tvip_hd">\r\n           <a href="javascript:;" class="tvip_close" title="关闭">关闭</a> \r\n        </div>\r\n        <div class="tvip_bd">\r\n            <!--用券结构-->\r\n            <div class="tvip_box_wxvod">\r\n                <div class="tvip_wxvod_tit">正在为微信帐号 <span class="tvip_wxvod_name"></span> 购买影片 《<span class="tvip_wxvod_film"></span>》</div>\r\n                <div class="tvip_wxvod_time">观影有效期：2天内无限次观看（至2016-05-06 20:05:55）</div>\r\n                <div class="tvip_wxvod_qr">\r\n                    <div class="tvip_qr_pic">\r\n                        <img id="layer_qrcode_img" class="tvip_qr_img" />\r\n                    </div>\r\n                    <div class="tvv_qr_txt">微信扫一扫，5.0元购买</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>' }, function (i, t, n) { var e = n(30), o = n(31), r = n(16), a = n(9), c = function (i, t) { i.find(".tvip_close").unbind("click").bind("click", function () { return i.find("a").unbind("click"), i.remove(), txv.login.hideMask(), t && t.trigger("1080pVipGuideClose", { action: "closeSkipAd" }), !1 }) }, s = function (i) { if (txv.login.isLogin() && txv.login.isStrongLogin()) { i.find(".tvip_close").trigger("click"); var t = { _source: 1, _scene: 8, _cid: COVER_INFO.id, _vid: VIDEO_INFO.vid, aid_version: "V0" }; $.pay(t), a.click(COVER_INFO.typeid + "_vip_skipad:openMinipay") } else r.checkLoginMask(), txv.login.openLogin({ isLowLogin: txv.login.isLowLogin(), success: function () { i.find(".tvip_close").trigger("click"), txv.cookie.set("vip_minipay", "1"), txv.cookie.set("vip_minipay_aid", "1"), window.location.reload() } }) }, p = function (i) { $("body").append(e), r.showFixedWindow(".tvip_layer", 540, 341), txv.login.showMask(); var t = $(".tvip_layer"); t.find(".tvip_btn_link").hide(), t.find(".tvip_open_tit").html("开通VIP会员，尊享免广告特权"), r.getEventText(function (i) { t.find(".tvip_btn_txt").html("开通VIP 享免广告 " + i) }), c(t, i), t.find("a.tvip_login_txt").unbind("click").bind("click", function () { return s(t), !1 }), t.find("a.tvip_btn_vip").unbind("click").bind("click", function () { return s(t), !1 }); var n = $.pay({ aid_version: "V0", key4: 1, key11: 2, _scene: 2 }, "aid"); return $.pay_qrimg({ id: "layer_qrcode_img", pay_type: 0, use_ws: !1, aid: n, pay_suc: function () { window.location.reload() } }), a.click(COVER_INFO.typeid + "_vip_layer:showQrcode"), a.click(COVER_INFO.typeid + "_vip_layer:showOpenVip"), t }, l = function (i) { var t = p(i); r.showFixedWindow(".tvip_layer", 540, 300), t.find(".tvip_ft").hide(), r.checkBindAccount(t) }, d = function (i) { $("body").append(o), r.showFixedWindow(".tvip_layer", 540, 372), txv.login.showMask(); var t = $(".tvip_layer"); c(t, i), r.getEventText(function (i) { var n = "" === i ? "" : '<span class="tvip_txt_bgred">' + i + "</span>"; t.find(".tvip_wx_tit").html("微信扫一扫 开通VIP尊享免广告特权 " + n) }); var n = $.pay({ aid_version: "V0", key4: 1, key11: 2, _scene: 2 }, "aid"); $.pay_qrimg({ id: "layer_qrcode_img", pay_type: 0, use_ws: !1, aid: n, pay_suc: function () { window.location.reload() } }), a.click(COVER_INFO.typeid + "_vip_layer:showQrcode"), r.checkBindAccount(t) }, v = function (i) { r.loadMinipayJS(function () { txv.login.isLogin() ? "wx" === txv.login.getLoginType() ? d(i) : l(i) : p(i) }), a.click(COVER_INFO.typeid + "_vip_skipad:showLayer") }; i.exports = v }, function (i, t) { i.exports = '<div class="tvip_layer">\r\n    <iframe style="position: absolute;top: 0;left: 0;width: 100%;height: 100%;z-index: 1;"></iframe>\r\n    <div class="tvip_content">\r\n        <div class="tvip_hd">\r\n           <a href="javascript:;" class="tvip_close" title="关闭">关闭</a> \r\n        </div>\r\n        <div class="tvip_bd">\r\n            <div class="tvip_box_open">\r\n                <div class="tvip_open_tit">试看结束，开通VIP免费看</div>\r\n                <div class="tvip_open_wrap">\r\n                    <div class="tvip_open_lf">\r\n                        <div class="tvip_open_btn">\r\n                            <a class="tvip_btn_vip" href="javascript:;"><span class="tvip_icon_vip"></span><span class="tvip_btn_txt">开通VIP会员免费看  买4送2</span></a>\r\n                            <a class="tvip_btn_link" href="javascript:;"><span class="tvip_btn_txt">非会员原价5.0元购买单片</span><span class="tvip_icon_more"></span></a>\r\n                        </div>\r\n                        <div class="tvip_pri_list">\r\n                            <div class="tvip_pri_item">\r\n                                <span class="tvip_pri_pic tvip_pri_vip"></span>\r\n                                <span class="tvip_pri_name">尊贵身份</span>\r\n                            </div>\r\n                            <div class="tvip_pri_item">\r\n                                <span class="tvip_pri_pic tvip_pri_ads"></span>\r\n                                <span class="tvip_pri_name">跳过广告</span>\r\n                            </div>\r\n                            <div class="tvip_pri_item">\r\n                                <span class="tvip_pri_pic tvip_pri_new"></span>\r\n                                <span class="tvip_pri_name">院线新片</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="tvip_open_rt">\r\n                        <div class="tvip_qr_pic">\r\n                            <img id="layer_qrcode_img" class="tvip_qr_img" />\r\n                        </div>\r\n                        <div class="tvv_qr_txt">微信扫一扫，轻松开会员</div>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n        <div class="tvip_ft">\r\n            <div class="tvip_change_login"><span class="tvip_change_txt">如你已是VIP会员，请</span><a class="tvip_login_txt" href="javascript:;">登录</a></div>\r\n        </div>\r\n    </div>\r\n</div>' }, function (i, t) { i.exports = '<div class="tvip_layer">\r\n    <iframe style="position: absolute;top: 0;left: 0;width: 100%;height: 100%;z-index: 1;"></iframe>\r\n    <div class="tvip_content">\r\n        <div class="tvip_hd">\r\n           <a href="javascript:;" class="tvip_close" title="关闭">关闭</a> \r\n        </div>\r\n        <div class="tvip_bd">\r\n            <!--用券结构-->\r\n            <div class="tvip_box_wx">\r\n                <div class="tvip_wx_tit">试看结束，微信扫一扫开通VIP免费看<span class="tvip_txt_bgred"></span></div>\r\n                <div class="tvip_wx_wrap">\r\n                    <div class="tvip_qr_pic">\r\n                        <img id="layer_qrcode_img" class="tvip_qr_img" />\r\n                    </div>\r\n                </div>\r\n                <div class="tvip_pri_list">\r\n                    <div class="tvip_pri_item">\r\n                        <span class="tvip_pri_pic tvip_pri_vip"></span>\r\n                        <span class="tvip_pri_name">尊贵身份</span>\r\n                    </div>\r\n                    <div class="tvip_pri_item">\r\n                        <span class="tvip_pri_pic tvip_pri_ads"></span>\r\n                        <span class="tvip_pri_name">跳过广告</span>\r\n                    </div>\r\n                    <div class="tvip_pri_item">\r\n                        <span class="tvip_pri_pic tvip_pri_new"></span>\r\n                        <span class="tvip_pri_name">院线新片</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>' }, function (i, t, n) { var e = n(30), o = n(31), r = n(16), a = n(9), c = function (i, t) { i.find(".tvip_close").unbind("click").bind("click", function () { return i.find("a").unbind("click"), i.remove(), txv.login.hideMask(), t && t.trigger("1080pVipGuideClose", { action: "close1080p" }), !1 }) }, s = function (i) { if (txv.login.isLogin() && txv.login.isStrongLogin()) { i.find(".tvip_close").trigger("click"); var t = { _source: 8, _scene: 8, _cid: COVER_INFO.id, _vid: VIDEO_INFO.vid, aid_version: "V0" }; $.pay(t), a.click(COVER_INFO.typeid + "_vip_1080p:openMinipay") } else r.checkLoginMask(), txv.login.openPayLogin({ isLowLogin: txv.login.isLowLogin(), success: function () { i.find(".tvip_close").trigger("click"), txv.cookie.set("vip_minipay", "1"), txv.cookie.set("vip_minipay_aid", "8"), window.location.reload() } }) }, p = function (i, t) { $("body").append(e), r.showFixedWindow(".tvip_layer", 540, 341), txv.login.showMask(); var n = $(".tvip_layer"); n.find(".tvip_btn_link").hide(), n.find(".tvip_open_tit").html("开通VIP会员，尊享1080P蓝光画质"), r.getEventText(function (i) { n.find(".tvip_btn_txt").html("开通VIP会员尊享蓝光画质 " + i) }), c(n, i), n.find(".tvip_ft").hide(), n.find("a.tvip_btn_vip").unbind("click").bind("click", function () { return s(n), !1 }); var o = $.pay({ aid_version: "V0", key4: 8, key11: 2, _scene: 2 }, "aid"); return $.pay_qrimg({ id: "layer_qrcode_img", pay_type: 0, use_ws: !1, aid: o, pay_suc: function () { window.location.reload() } }), a.click(COVER_INFO.typeid + "_vip_layer:showQrcode"), !t && r.checkPcClient(n), n }, l = function (i) { var t = p(i, !0); r.showFixedWindow(".tvip_layer", 540, 300), r.checkBindAccount(t, null, function () { r.checkPcClient(t) }) }, d = function (i) { $("body").append(o), r.showFixedWindow(".tvip_layer", 540, 372), txv.login.showMask(); var t = $(".tvip_layer"); c(t, i), r.getEventText(function (i) { var n = "" === i ? "" : '<span class="tvip_txt_bgred">' + i + "</span>"; t.find(".tvip_wx_tit").html("微信扫一扫，开通VIP尊享1080P蓝光画质 " + n) }); var n = $.pay({ aid_version: "V0", key4: 8, key11: 2, _scene: 2 }, "aid"); $.pay_qrimg({ id: "layer_qrcode_img", pay_type: 0, use_ws: !1, aid: n, pay_suc: function () { window.location.reload() } }), a.click(COVER_INFO.typeid + "_vip_layer:showQrcode"), r.checkBindAccount(t, null, function () { r.checkPcClient(t) }) }, v = function (i) { r.loadMinipayJS(function () { txv.login.isLogin() ? "wx" === txv.login.getLoginType() ? d(i) : l(i) : p(i) }), a.click(COVER_INFO.typeid + "_vip_1080p:showLayer") }; i.exports = v }, function (i, t, n) { var e = n(34), o = n(38), r = n(39), a = n(42), c = n(22), s = n(9); $("body").append('<link rel="stylesheet" href="//vm.gtimg.cn/tencentvideo/vstyle/web/common/style/tvip_layer.css" />'); var p = function () { $(".tvip_layer, .tvmp_iframe, #wx_pay_popup, #login_win").length > 0 || (COVER_INFO.payStatus == c.VIP_ONLY ? o(!0) : COVER_INFO.payStatus == c.VIP_MONTHLY ? a(!0) : COVER_INFO.payStatus == c.VIP_TICKET ? r(!0) : COVER_INFO.payStatus == c.SINGLE_BUY && e(!0), s.click(COVER_INFO.typeid + "_vip_trialover:showLayer")) }; i.exports = p }, function (i, t, n) { var e = n(35), o = n(36), r = n(37), a = n(16), c = n(25), s = n(9), p = a.getFormatPrice(VIDEO_INFO.vipPrice), l = a.getFormatPrice(VIDEO_INFO.singlePrice), d = !1, v = function (i) { i.find(".tvip_close").unbind("click").bind("click", function () { return i.find("a").unbind("click"), i.remove(), txv.login.hideMask(), !1 }) }, u = function (i) { if (txv.login.isLogin() && txv.login.isStrongLogin()) { i.find(".tvip_close").trigger("click"); var t = { _source: 10, _scene: 8, _cid: COVER_INFO.id, _vid: VIDEO_INFO.vid, aid_version: "V0" }; $.pay(t), d ? s.click(COVER_INFO.typeid + "_vip_trialover:openMinipay") : s.click(COVER_INFO.typeid + "_vip_layer:openMinipay") } else a.checkLoginMask(), txv.login.openLogin({ isLowLogin: txv.login.isLowLogin(), success: function () { i.find(".tvip_close").trigger("click"), txv.cookie.set("vip_minipay", "1"), window.location.reload() } }) }, _ = function (i) { a.checkLoginMask(), txv.login.openLogin({ isLowLogin: txv.login.isLowLogin(), success: function () { i.find(".tvip_close").trigger("click"), txv.cookie.set("vip_singlebuy", "1"), window.location.reload() } }) }, f = function () { $("body").append(e), a.showFixedWindow(".tvip_layer", 540, 225), txv.login.showMask(); var i = $(".tvip_layer"); a.getVideoDays(function (t) { i.find("#vip_view_days").html(t + "天内无限次观看（至" + a.getExpDate(t) + ")") }); var t = "null" !== VIDEO_INFO.tryTime ? "试看结束，" : ""; i.find(".tvip_box_vod .tvip_vod_tit").html(t + "本片为付费视频，需购买观看"), i.find(".tvip_btn_vip .tvip_btn_txt").html(l + "元购买本片"), i.find(".tvip_btn_vip .tvip_txt_line").html(""), v(i), i.find("a.tvip_btn_vip").unbind("click").bind("click", function () { return txv.login.isLogin() && txv.login.isStrongLogin() ? (i.find(".tvip_close").trigger("click"), c()) : _(i), !1 }) }, g = function () { if (100 == COVER_INFO.vipDiscount) f(); else { $("body").append(o), a.showFixedWindow(".tvip_layer", 540, 341), txv.login.showMask(); var i = $(".tvip_layer"), t = "null" !== VIDEO_INFO.tryTime ? "试看结束，" : ""; a.getEventText(function (n) { i.find(".tvip_open_tit").html(t + "本片需购买观看，开通VIP享优惠"), i.find("a.tvip_btn_vip .tvip_btn_txt").html("开通VIP享" + p + "元购买本片 " + n), i.find("a.tvip_btn_link .tvip_btn_txt").html("非会员原价" + l + "元购买本片"), a.setQrImage("layer_qrcode_img", { key4: 10 }) }), v(i), i.find("a.tvip_btn_vip").unbind("click").bind("click", function () { return u(i), !1 }), i.find("a.tvip_btn_link").unbind("click").bind("click", function () { return _(i), !1 }), i.find("a.tvip_login_txt").unbind("click").bind("click", function () { return _(i), !1 }), d ? s.click(COVER_INFO.typeid + "_vip_trialover:showOpenVip") : s.click(COVER_INFO.typeid + "_vip_layer:showOpenVip") } }, y = function () { if ("wx" === txv.login.getLoginType()) if (100 == COVER_INFO.vipDiscount) f(); else { $("body").append(r), a.showFixedWindow(".tvip_layer", 540, 372), txv.login.showMask(); var i = $(".tvip_layer"); v(i), a.getEventText(function (t) { i.find(".tvip_box_wx .tvip_wx_tit").html("本片为付费视频，微信扫一扫开通VIP享" + p + "元购买 <span class='tvip_txt_bgred'>" + t + "</span>") }), i.find(".tvip_btn_link .tvip_btn_txt").html("非会员原价" + l + "元购买本片"), i.find("a.tvip_btn_link").unbind("click").bind("click", function () { return i.find(".tvip_close").trigger("click"), c(), !1 }), a.setQrImage("layer_qrcode_img", { key4: 10 }), d ? s.click(COVER_INFO.typeid + "_vip_trialover:showQrcode") : s.click(COVER_INFO.typeid + "_vip_layer:showQrcode") } else if (100 == COVER_INFO.vipDiscount) f(); else { $("body").append(o), a.showFixedWindow(".tvip_layer", 540, 286), txv.login.showMask(); var i = $(".tvip_layer"), t = "null" !== VIDEO_INFO.tryTime ? "试看结束，" : ""; a.getEventText(function (n) { i.find(".tvip_open_tit").html(t + "本片需购买观看，开通VIP享优惠"), i.find("a.tvip_btn_vip .tvip_btn_txt").html("开通VIP享" + p + "元购买本片 " + n), i.find("a.tvip_btn_link .tvip_btn_txt").html("非会员原价" + l + "元购买本片"), a.setQrImage("layer_qrcode_img", { key4: 10 }) }), v(i), i.find("a.tvip_btn_vip").unbind("click").bind("click", function () { return u(i), !1 }), i.find("a.tvip_btn_link").unbind("click").bind("click", function () { return i.find(".tvip_close").trigger("click"), c(), !1 }), i.find(".tvip_ft").hide(), d ? s.click(COVER_INFO.typeid + "_vip_trialover:showOpenVip") : s.click(COVER_INFO.typeid + "_vip_layer:showOpenVip") } }, m = function (i) { if (d = !!i, 100 == COVER_INFO.vipDiscount) f(); else { $("body").append(e), a.showFixedWindow(".tvip_layer", 540, 225), txv.login.showMask(); var t = $(".tvip_layer"); a.getVideoDays(function (i) { t.find("#vip_view_days").html(i + "天内无限次观看（至" + a.getExpDate(i) + ")") }); var n = "null" !== VIDEO_INFO.tryTime ? "试看结束，" : ""; t.find(".tvip_box_vod .tvip_vod_tit").html(n + "本片需购买观看，您是VIP享优惠"), t.find(".tvip_btn_vip .tvip_btn_txt").html("VIP享" + p + "元购买本片"), t.find(".tvip_btn_vip .tvip_txt_line").html("原价" + l + "元"), v(t), t.find("a.tvip_btn_vip").unbind("click").bind("click", function () { return t.find(".tvip_close").trigger("click"), c(), !1 }) } }, x = function (i) { d = !!i, txv.login.isLogin() ? a.getVipInfo(function (i, t) { i ? m() : y() }) : g() }; i.exports = x }, function (i, t) { i.exports = '<div class="tvip_layer">\r\n    <iframe style="position: absolute;top: 0;left: 0;width: 100%;height: 100%;z-index: 1;"></iframe>\r\n    <div class="tvip_content">\r\n        <div class="tvip_hd">\r\n           <a href="javascript:;" class="tvip_close" title="关闭">关闭</a> \r\n        </div>\r\n        <div class="tvip_bd">\r\n            <div class="tvip_box_vod">\r\n                <div class="tvip_vod_tit">试看结束，开通VIP免费看</div>\r\n                <div class="tvip_time_info"><span class="tvip_time_tit">观影有效期：</span> <span id="vip_view_days"></span></div>\r\n                <a class="tvip_btn_vip" href="javascript:;"><span class="tvip_btn_txt">VIP享2.5元购买本片</span><span class="tvip_txt_line">原价5.0元</span></a>\r\n            </div>\r\n        </div>\r\n        <div class="tvip_ft" style="display:none;">\r\n            <div class="tvip_change_login"><span class="tvip_change_txt">如你已是VIP会员，请</span><a class="tvip_login_txt" href="javascript:;">登录</a></div>\r\n        </div>\r\n    </div>\r\n</div>' }, function (i, t) { i.exports = '<div class="tvip_layer">\r\n    <iframe style="position: absolute;top: 0;left: 0;width: 100%;height: 100%;z-index: 1;"></iframe>\r\n    <div class="tvip_content">\r\n        <div class="tvip_hd">\r\n           <a href="javascript:;" class="tvip_close" title="关闭">关闭</a> \r\n        </div>\r\n        <div class="tvip_bd">\r\n            <div class="tvip_box_open">\r\n                <div class="tvip_open_tit">试看结束，开通VIP免费看</div>\r\n                <div class="tvip_open_wrap">\r\n                    <div class="tvip_open_lf">\r\n                        <div class="tvip_open_btn">\r\n                            <a class="tvip_btn_vip" href="javascript:;"><span class="tvip_icon_vip"></span><span class="tvip_btn_txt">开通VIP会员</span></a>\r\n                            <a class="tvip_btn_link" href="javascript:;"><span class="tvip_btn_txt">非会员原价1元购买单片</span><span class="tvip_icon_more"></span></a>\r\n                        </div>\r\n                        <div class="tvip_pri_list">\r\n                            <div class="tvip_pri_item">\r\n                                <span class="tvip_pri_pic tvip_pri_vip"></span>\r\n                                <span class="tvip_pri_name">尊贵身份</span>\r\n                            </div>\r\n                            <div class="tvip_pri_item">\r\n                                <span class="tvip_pri_pic tvip_pri_ads"></span>\r\n                                <span class="tvip_pri_name">跳过广告</span>\r\n                            </div>\r\n                            <div class="tvip_pri_item">\r\n                                <span class="tvip_pri_pic tvip_pri_new"></span>\r\n                                <span class="tvip_pri_name">院线新片</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="tvip_open_rt">\r\n                        <div class="tvip_qr_pic">\r\n                            <img id="layer_qrcode_img" class="tvip_qr_img" />\r\n                        </div>\r\n                        <div class="tvv_qr_txt">微信扫一扫，轻松开会员</div>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n        <div class="tvip_ft">\r\n            <div class="tvip_change_login"><span class="tvip_change_txt">如你已是VIP会员，请</span><a class="tvip_login_txt" href="javascript:;">登录</a></div>\r\n        </div>\r\n    </div>\r\n</div>' }, function (i, t) { i.exports = '<div class="tvip_layer">\r\n    <iframe style="position: absolute;top: 0;left: 0;width: 100%;height: 100%;z-index: 1;"></iframe>\r\n    <div class="tvip_content">\r\n        <div class="tvip_hd">\r\n           <a href="javascript:;" class="tvip_close" title="关闭">关闭</a> \r\n        </div>\r\n        <div class="tvip_bd">\r\n            <!--用券结构-->\r\n            <div class="tvip_box_wx">\r\n                <div class="tvip_wx_tit">试看结束，微信扫一扫开通VIP免费看<span class="tvip_txt_bgred"></span></div>\r\n                <div class="tvip_wx_wrap">\r\n                    <div class="tvip_qr_pic">\r\n                        <img id="layer_qrcode_img" class="tvip_qr_img" />\r\n                    </div>\r\n                    <a class="tvip_btn_link" href="javascript:;"><span class="tvip_btn_txt">非会员原价5.0元购买单片</span><span class="tvip_icon_more"></span></a>\r\n                </div>\r\n                <div class="tvip_pri_list">\r\n                    <div class="tvip_pri_item">\r\n                        <span class="tvip_pri_pic tvip_pri_vip"></span>\r\n                        <span class="tvip_pri_name">尊贵身份</span>\r\n                    </div>\r\n                    <div class="tvip_pri_item">\r\n                        <span class="tvip_pri_pic tvip_pri_ads"></span>\r\n                        <span class="tvip_pri_name">跳过广告</span>\r\n                    </div>\r\n                    <div class="tvip_pri_item">\r\n                        <span class="tvip_pri_pic tvip_pri_new"></span>\r\n                        <span class="tvip_pri_name">院线新片</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>' }, function (i, t, n) {
    var e = n(30), o = n(31), r = n(16), a = n(9), c = !1, s = function (i) { i.find(".tvip_close").unbind("click").bind("click", function () { return i.find("a").unbind("click"), i.remove(), txv.login.hideMask(), !1 }) }, p = function (i) { if (txv.login.isLogin() && txv.login.isStrongLogin()) { i.find(".tvip_close").trigger("click"); var t = { _source: 10, _scene: 8, _cid: COVER_INFO.id, _vid: VIDEO_INFO.vid, aid_version: "V0" }; $.pay(t), c ? a.click(COVER_INFO.typeid + "_vip_trialover:openMinipay") : a.click(COVER_INFO.typeid + "_vip_layer:openMinipay") } else r.checkLoginMask(), txv.login.openLogin({ isLowLogin: txv.login.isLowLogin(), success: function () { i.find(".tvip_close").trigger("click"), txv.cookie.set("vip_minipay", "1"), window.location.reload() } }) }, l = function () { $("body").append(e), r.showFixedWindow(".tvip_layer", 540, 341), txv.login.showMask(); var i = $(".tvip_layer"); i.find(".tvip_btn_link").hide(); var t = "null" !== VIDEO_INFO.tryTime ? "试看结束，开通VIP会员免费看" : "开通VIP会员免费看"; i.find(".tvip_open_tit").html(t), r.getEventText(function (t) { i.find(".tvip_btn_txt").html("开通VIP会员免费看 " + t) }), s(i), i.find("a.tvip_login_txt").unbind("click").bind("click", function () { return p(i), !1 }), i.find("a.tvip_btn_vip").unbind("click").bind("click", function () { return p(i), !1 }); var n = $.pay({ aid_version: "V0", key4: 10, key11: 2, _scene: 2 }, "aid"); return $.pay_qrimg({ id: "layer_qrcode_img", pay_type: 0, use_ws: !1, aid: n, pay_suc: function () { window.location.reload() } }), c ? a.click(COVER_INFO.typeid + "_vip_trialover:showOpenVip") : a.click(COVER_INFO.typeid + "_vip_layer:showOpenVip"), i.find("#pc_client_down, #pc_client_open").hide(), i }, d = function () { var i = l(); r.showFixedWindow(".tvip_layer", 540, 300), i.find(".tvip_ft").hide(), r.checkBindAccount(i) }, v = function () {
        $("body").append(o), r.showFixedWindow(".tvip_layer", 540, 372), txv.login.showMask(); var i = $(".tvip_layer"); s(i); var t = "null" !== VIDEO_INFO.tryTime ? "试看结束，" : ""; r.getEventText(function (n) { var e = "" === n ? "" : '<span class="tvip_txt_bgred">' + n + "</span>"; i.find(".tvip_wx_tit").html(t + "微信扫一扫开通VIP免费看 " + e) }); var n = $.pay({ aid_version: "V0", key4: 10, key11: 2, _scene: 2 }, "aid"); $.pay_qrimg({ id: "layer_qrcode_img", pay_type: 0, use_ws: !1, aid: n, pay_suc: function () { window.location.reload() } }), c ? a.click(COVER_INFO.typeid + "_vip_trialover:showQrcode") : a.click(COVER_INFO.typeid + "_vip_layer:showQrcode"),
            r.checkBindAccount(i)
    }, u = function (i) { c = !!i, r.loadMinipayJS(function () { txv.login.isLogin() ? "wx" === txv.login.getLoginType() ? v() : d() : l() }) }; i.exports = u
}, function (i, t, n) { var e = n(16), o = n(36), r = n(37), a = n(40), c = n(41), s = n(25), p = n(23), l = n(9), d = e.getFormatPrice(VIDEO_INFO.vipPrice), v = e.getFormatPrice(VIDEO_INFO.singlePrice), u = !1, _ = function (i) { i.find(".tvip_close").unbind("click").bind("click", function () { return i.find("a").unbind("click"), i.remove(), txv.login.hideMask(), !1 }) }, f = function (i) { if (txv.login.isLogin() && txv.login.isStrongLogin()) { i.find(".tvip_close").trigger("click"); var t = { _source: 10, _scene: 8, _cid: COVER_INFO.id, _vid: VIDEO_INFO.vid, aid_version: "V0" }; $.pay(t), u ? l.click(COVER_INFO.typeid + "_vip_trialover:openMinipay") : l.click(COVER_INFO.typeid + "_vip_layer:openMinipay") } else e.checkLoginMask(), txv.login.openLogin({ isLowLogin: txv.login.isLowLogin(), success: function () { i.find(".tvip_close").trigger("click"), txv.cookie.set("vip_minipay", "1"), window.location.reload() } }) }, g = function (i) { txv.login.isLogin() && txv.login.isStrongLogin() ? (i.find(".tvip_close").trigger("click"), s()) : (e.checkLoginMask(), txv.login.openLogin({ isLowLogin: txv.login.isLowLogin(), success: function () { i.find(".tvip_close").trigger("click"), txv.cookie.set("vip_singlebuy", "1"), window.location.reload() } })) }, y = function () { $("body").append(o), e.showFixedWindow(".tvip_layer", 540, 341), txv.login.showMask(); var i = $(".tvip_layer"); _(i), e.getEventText(function (t) { i.find(".tvip_btn_vip .tvip_btn_txt").html("开通VIP 获赠观影券 " + t) }), i.find(".tvip_box_open .tvip_open_tit").html("开通VIP会员用券看"), i.find(".tvip_btn_link .tvip_btn_txt").html("非会员原价" + v + "元购买本片"), i.find("a.tvip_btn_link").unbind("click").bind("click", function () { return g(i), !1 }), i.find("a.tvip_btn_vip").unbind("click").bind("click", function () { return f(i), !1 }), i.find("a.tvip_login_txt").unbind("click").bind("click", function () { return f(i), !1 }); var t = $.pay({ aid_version: "V0", key4: 10, key11: 2, _scene: 2 }, "aid"); return $.pay_qrimg({ id: "layer_qrcode_img", pay_type: 0, use_ws: !1, aid: t, pay_suc: function () { window.location.reload() } }), u ? l.click(COVER_INFO.typeid + "_vip_trialover:showOpenVip") : l.click(COVER_INFO.typeid + "_vip_layer:showOpenVip"), i }, m = function () { $("body").append(a), e.showFixedWindow(".tvip_layer", 540, 343), txv.login.showMask(); var i = $(".tvip_layer"); _(i), e.getEventText(function (t) { i.find(".tvip_btn_vip .tvip_btn_txt").html("续费VIP会员 获赠观影券 " + t) }), i.find(".tvip_box_open .tvip_open_tit").html("试看结束，用券观看"), i.find(".tvip_btn_link .tvip_btn_txt").html("VIP享" + d + "元购买本片"), i.find(".tvip_btn_link .tvip_txt_line").html("原价" + v + "元"), i.find("a.tvip_btn_link").unbind("click").bind("click", function () { return g(i), !1 }), i.find("a.tvip_btn_vip").unbind("click").bind("click", function () { return f(i), !1 }); var t = $.pay({ aid_version: "V0", key4: 10, key11: 2, _scene: 2 }, "aid"); return $.pay_qrimg({ id: "layer_qrcode_img", pay_type: 0, use_ws: !1, aid: t, pay_suc: function () { window.location.reload() } }), u ? l.click(COVER_INFO.typeid + "_vip_trialover:showOpenVip") : l.click(COVER_INFO.typeid + "_vip_layer:showOpenVip"), i }, x = function () { $("body").append(c), e.showFixedWindow(".tvip_layer", 540, 434), txv.login.showMask(); var i = $(".tvip_layer"); _(i), e.getEventText(function (t) { i.find(".tvip_box_wx .tvip_wx_tit").html("试看结束，微信扫一扫，续费VIP用券观看 " + t) }), i.find(".tvip_btn_link .tvip_btn_txt").html("VIP享" + d + "元购买本片"), i.find(".tvip_btn_link .tvip_txt_line").html("原价" + v + "元"), i.find("a.tvip_btn_link").unbind("click").bind("click", function () { return g(i), !1 }); var t = $.pay({ aid_version: "V0", key4: 10, key11: 2, _scene: 2 }, "aid"); $.pay_qrimg({ id: "layer_qrcode_img", pay_type: 0, use_ws: !1, aid: t, pay_suc: function () { window.location.reload() } }), u ? l.click(COVER_INFO.typeid + "_vip_trialover:showQrcode") : l.click(COVER_INFO.typeid + "_vip_layer:showQrcode") }, h = function () { e.getUserTicket(function (i) { i > 0 ? p() : "wx" === txv.login.getLoginType() ? x() : m() }) }, w = function () { var i = y(); e.showFixedWindow(".tvip_layer", 540, 300), i.find(".tvip_ft").hide(), i.find("a.tvip_login_txt").unbind("click") }, k = function () { $("body").append(r), e.showFixedWindow(".tvip_layer", 540, 372), txv.login.showMask(); var i = $(".tvip_layer"); _(i), e.getEventText(function (t) { var n = "" === t ? "" : "<span class='tvip_txt_bgred'>" + t + "</span>"; i.find(".tvip_box_wx .tvip_wx_tit").html("微信扫一扫，开通VIP会员用券看 " + n) }), i.find(".tvip_btn_link .tvip_btn_txt").html("非会员" + v + "元购买本片"), i.find("a.tvip_btn_link").unbind("click").bind("click", function () { return i.find(".tvip_close").trigger("click"), s(), !1 }); var t = $.pay({ aid_version: "V0", key4: 10, key11: 2, _scene: 2 }, "aid"); $.pay_qrimg({ id: "layer_qrcode_img", pay_type: 0, use_ws: !1, aid: t, pay_suc: function () { window.location.reload() } }), u ? l.click(COVER_INFO.typeid + "_vip_trialover:showQrcode") : l.click(COVER_INFO.typeid + "_vip_layer:showQrcode") }, V = function (i) { u = !!i, e.loadMinipayJS(function () { txv.login.isLogin() ? e.getVipInfo(function (i, t) { i ? h() : e.getUserTicket(function (i) { i > 0 ? p(function () { e.showFixedWindow(".tvip_layer", 540, 276); var i = $(".tvip_layer"); i.find(".tvip_btn_link .tvip_btn_txt").html("开通VIP会员看更多大片"), e.getEventText(function (t) { i.find(".tvip_btn_link .tvip_txt_red").html(t) }), i.find(".tvip_btn_link").unbind("click").bind("click", function () { i.find(".tvip_close").trigger("click"); var t = { _source: 10, _scene: 8, _cid: COVER_INFO.id, _vid: VIDEO_INFO.vid, aid_version: "V0" }; return $.pay(t), u ? l.click(COVER_INFO.typeid + "_vip_trialover:openMinipay") : l.click(COVER_INFO.typeid + "_vip_layer:openMinipay"), !1 }).show() }) : "wx" === txv.login.getLoginType() ? k() : w() }) }) : y() }) }; i.exports = V }, function (i, t) { i.exports = '<div class="tvip_layer">\r\n    <iframe style="position: absolute;top: 0;left: 0;width: 100%;height: 100%;z-index: 1;"></iframe>\r\n    <div class="tvip_content">\r\n        <div class="tvip_hd">\r\n           <a href="javascript:;" class="tvip_close" title="关闭">关闭</a> \r\n        </div>\r\n        <div class="tvip_bd">\r\n            <div class="tvip_box_open tvip_box_open_wx">\r\n                <div class="tvip_open_tit">试看结束，开通VIP免费看</div>\r\n                <div class="tvip_open_wrap">\r\n                    <div class="tvip_open_lf">\r\n                        <div class="tvip_tickets_info">\r\n                            本片需用券观看，你的剩余观影券为 <span class="tvip_txt_red">0</span> 张<br>续费VIP，立即获赠 <span class="tvip_txt_red">2</span> 张观影券\r\n                        </div>\r\n\r\n                        <div class="tvip_open_btn">\r\n                            <a class="tvip_btn_vip" href="javascript:;"><span class="tvip_icon_vip"></span><span class="tvip_btn_txt">开通VIP会员免费看  买4送2</span></a>\r\n                            <a class="tvip_btn_link" href="javascript:;"><span class="tvip_btn_txt">非会员原价5.0元购买单片</span><span class="tvip_icon_more"></span><span class="tvip_txt_line">原价5.0元</span></a>\r\n                        </div>\r\n                        <div class="tvip_pri_list">\r\n                            <div class="tvip_pri_item">\r\n                                <span class="tvip_pri_pic tvip_pri_vip"></span>\r\n                                <span class="tvip_pri_name">尊贵身份</span>\r\n                            </div>\r\n                            <div class="tvip_pri_item">\r\n                                <span class="tvip_pri_pic tvip_pri_ads"></span>\r\n                                <span class="tvip_pri_name">跳过广告</span>\r\n                            </div>\r\n                            <div class="tvip_pri_item">\r\n                                <span class="tvip_pri_pic tvip_pri_new"></span>\r\n                                <span class="tvip_pri_name">院线新片</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="tvip_open_rt">\r\n                        <div class="tvip_qr_pic">\r\n                            <img id="layer_qrcode_img" class="tvip_qr_img" />\r\n                        </div>\r\n                        <div class="tvv_qr_txt">微信扫一扫，轻松开会员</div>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>' }, function (i, t) { i.exports = '<div class="tvip_layer">\r\n    <iframe style="position: absolute;top: 0;left: 0;width: 100%;height: 100%;z-index: 1;"></iframe>\r\n    <div class="tvip_content">\r\n        <div class="tvip_hd">\r\n           <a href="javascript:;" class="tvip_close" title="关闭">关闭</a> \r\n        </div>\r\n        <div class="tvip_bd">\r\n            <!--用券结构-->\r\n            <div class="tvip_box_wx">\r\n                <div class="tvip_wx_tit">试看结束，微信扫一扫开通VIP免费看<span class="tvip_txt_bgred"></span></div>\r\n                <div class="tvip_tickets_info">\r\n                    本片需用券观看，你的剩余观影券为 <span class="tvip_txt_red">0</span> 张<br>续费VIP，立即获赠 <span class="tvip_txt_red">2</span> 张观影券\r\n                </div>\r\n                <div class="tvip_wx_wrap">\r\n                    <div class="tvip_qr_pic">\r\n                        <img id="layer_qrcode_img" class="tvip_qr_img" />\r\n                    </div>\r\n                    <a class="tvip_btn_link" href="javascript:;"><span class="tvip_btn_txt"></span><span class="tvip_icon_more"></span><span class="tvip_txt_line">原价5.0元</span></a>\r\n                </div>\r\n                <div class="tvip_pri_list">\r\n                    <div class="tvip_pri_item">\r\n                        <span class="tvip_pri_pic tvip_pri_vip"></span>\r\n                        <span class="tvip_pri_name">尊贵身份</span>\r\n                    </div>\r\n                    <div class="tvip_pri_item">\r\n                        <span class="tvip_pri_pic tvip_pri_ads"></span>\r\n                        <span class="tvip_pri_name">跳过广告</span>\r\n                    </div>\r\n                    <div class="tvip_pri_item">\r\n                        <span class="tvip_pri_pic tvip_pri_new"></span>\r\n                        <span class="tvip_pri_name">院线新片</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>' }, function (i, t, n) { var e = n(36), o = n(37), r = n(16), a = n(25), c = n(23), s = n(9), p = (r.getFormatPrice(VIDEO_INFO.vipPrice), r.getFormatPrice(VIDEO_INFO.singlePrice)), l = !1, d = function (i) { i.find(".tvip_close").unbind("click").bind("click", function () { return i.find("a").unbind("click"), i.remove(), txv.login.hideMask(), !1 }) }, v = function (i) { if (txv.login.isLogin() && txv.login.isStrongLogin()) { i.find(".tvip_close").trigger("click"); var t = { _source: 10, _scene: 8, _cid: COVER_INFO.id, _vid: VIDEO_INFO.vid, aid_version: "V0" }; $.pay(t), l ? s.click(COVER_INFO.typeid + "_vip_trialover:openMinipay") : s.click(COVER_INFO.typeid + "_vip_layer:openMinipay") } else r.checkLoginMask(), txv.login.openPayLogin({ isLowLogin: txv.login.isLowLogin(), success: function () { i.find(".tvip_close").trigger("click"), txv.cookie.set("vip_minipay", "1"), window.location.reload() } }) }, u = function (i) { txv.login.isLogin() && txv.login.isStrongLogin() ? (i.find(".tvip_close").trigger("click"), a()) : (r.checkLoginMask(), txv.login.openLogin({ isLowLogin: txv.login.isLowLogin(), success: function () { i.find(".tvip_close").trigger("click"), txv.cookie.set("vip_singlebuy", "1"), window.location.reload() } })) }, _ = function () { $("body").append(e), r.showFixedWindow(".tvip_layer", 540, 341), txv.login.showMask(); var i = $(".tvip_layer"); d(i); var t = "null" !== VIDEO_INFO.tryTime ? "试看结束，开通VIP会员免费看" : "开通VIP会员免费看"; i.find(".tvip_open_tit").html(t), i.find(".tvip_btn_link .tvip_btn_txt").html("非会员原价" + p + "元购买本片"), r.getEventText(function (t) { i.find(".tvip_btn_vip .tvip_btn_txt").html("开通VIP会员免费看 " + t) }), i.find("a.tvip_login_txt").unbind("click").bind("click", function () { return v(i), !1 }), i.find("a.tvip_btn_vip").unbind("click").bind("click", function () { return v(i), !1 }), i.find("a.tvip_btn_link").unbind("click").bind("click", function () { return u(i), !1 }); var n = $.pay({ aid_version: "V0", key4: 10, key11: 2, _scene: 2 }, "aid"); return $.pay_qrimg({ id: "layer_qrcode_img", pay_type: 0, use_ws: !0, aid: n, pay_suc: function () { window.location.reload() } }), l ? s.click(COVER_INFO.typeid + "_vip_trialover:showQrcode") : s.click(COVER_INFO.typeid + "_vip_layer:showQrcode"), i }, f = function () { var i = _(); i.find(".tvip_ft").hide(), r.showFixedWindow(".tvip_layer", 540, 291) }, g = function () { $("body").append(o), r.showFixedWindow(".tvip_layer", 540, 372), txv.login.showMask(); var i = $(".tvip_layer"); r.getEventText(function (t) { var n = "" === t ? "" : '<span class="tvip_txt_bgred">' + t + "</span>"; i.find(".tvip_box_wx .tvip_wx_tit").html("试看结束，微信扫一扫开通VIP免费看 " + n) }), i.find(".tvip_btn_link .tvip_btn_txt").html("非会员原价" + p + "元购买本片"), i.find("a.tvip_btn_link").unbind("click").bind("click", function () { return u(i), !1 }); var t = $.pay({ aid_version: "V0", key4: 10, key11: 2, _scene: 2 }, "aid"); $.pay_qrimg({ id: "layer_qrcode_img", pay_type: 0, use_ws: !1, aid: t, pay_suc: function () { window.location.reload() } }), l ? s.click(COVER_INFO.typeid + "_vip_trialover:showQrcode") : s.click(COVER_INFO.typeid + "_vip_layer:showQrcode"), d(i) }, y = function (i) { l = !!i, r.loadMinipayJS(function () { txv.login.isLogin() ? r.getUserTicket(function (i) { i > 0 ? c(function () { r.showFixedWindow(".tvip_layer", 540, 276); var i = $(".tvip_layer"); i.find(".tvip_btn_link .tvip_btn_txt").html("开通VIP会员看更多大片"), r.getEventText(function (t) { i.find(".tvip_btn_link .tvip_txt_red").html(t) }), i.find(".tvip_btn_link").unbind("click").bind("click", function () { i.find(".tvip_close").trigger("click"); var t = { _source: 10, _scene: 8, _cid: COVER_INFO.id, _vid: VIDEO_INFO.vid, aid_version: "V0" }; return $.pay(t), l ? s.click(COVER_INFO.typeid + "_vip_trialover:openMinipay") : s.click(COVER_INFO.typeid + "_vip_layer:openMinipay"), !1 }).show() }) : "wx" === txv.login.getLoginType() ? g() : f() }) : _() }) }; i.exports = y }, function (i, t, n) { var e = n(16), o = n(22), r = window.PageMsg, a = n(9), c = n(25), s = n(23), p = e.getTryTime(VIDEO_INFO.tryTime), l = "可试看" + p + "，", d = "", v = "", u = "", _ = function () { if (COVER_INFO.payStatus == o.SINGLE_BUY) { var i = e.getFormatPrice(VIDEO_INFO.singlePrice), t = e.getFormatPrice(VIDEO_INFO.vipPrice); 100 == COVER_INFO.vipDiscount ? (txv.vip.playerTipsEvent = "singlebuy", v = l + "[" + i + "元购买]看完整版") : (txv.vip.playerTipsEvent = "minipay", v = l + "[开通VIP]享" + t + "元购买完整版 原价" + i + "元") } else COVER_INFO.payStatus == o.VIP_MONTHLY ? (txv.vip.playerTipsEvent = "minipay", v = l + "[开通VIP] 免费观看完整版") : COVER_INFO.payStatus == o.VIP_ONLY ? (txv.vip.playerTipsEvent = "minipay", v = l + "[开通VIP] 免费观看完整版") : COVER_INFO.payStatus == o.VIP_TICKET && (txv.vip.playerTipsEvent = "minipay", v = l + "[开通VIP] 用券观看完整版"); return u = v }, f = function () { if ("" !== u) return u; if (COVER_INFO.payStatus == o.SINGLE_BUY) { var i = e.getFormatPrice(VIDEO_INFO.singlePrice), t = e.getFormatPrice(VIDEO_INFO.vipPrice); 100 == COVER_INFO.vipDiscount ? (txv.vip.playerTipsEvent = "singlebuy", v = l + "[" + i + "元购买]看完整版") : (txv.vip.playerTipsEvent = "minipay", v = l + "[开通VIP]享" + t + "元购买完整版 原价" + i + "元"), u = v } else COVER_INFO.payStatus == o.VIP_MONTHLY ? e.getUserTicket(function (i) { i > 0 ? (txv.vip.playerTipsEvent = "useticket", v = l + "[用券观看] 完整影片") : (txv.vip.playerTipsEvent = "minipay", v = l + "[开通VIP] 免费观看完整版"), u = v }) : COVER_INFO.payStatus == o.VIP_ONLY ? (txv.vip.playerTipsEvent = "minipay", v = l + "[开通VIP] 免费观看完整版", u = v) : COVER_INFO.payStatus == o.VIP_TICKET && e.getUserTicket(function (i) { i > 0 ? (txv.vip.playerTipsEvent = "useticket", v = l + "[用券观看] 完整影片") : (txv.vip.playerTipsEvent = "minipay", v = l + "[开通VIP] 用券观看完整版"), u = v }); return u }, g = function () { if ("" !== u) return u; if (COVER_INFO.payStatus == o.SINGLE_BUY) { var i = e.getFormatPrice(VIDEO_INFO.singlePrice), t = e.getFormatPrice(VIDEO_INFO.vipPrice); 100 == COVER_INFO.vipDiscount ? (txv.vip.playerTipsEvent = "singlebuy", v = l + "[" + i + "元购买]看完整版") : (txv.vip.playerTipsEvent = "singlebuy", v = l + "[VIP享" + t + "元购买] 看完整版 原价" + i + "元"), u = v } else COVER_INFO.payStatus == o.VIP_MONTHLY ? (v = "您已是VIP会员，免费观看完整版", u = v) : COVER_INFO.payStatus == o.VIP_ONLY ? (v = "您已是VIP会员，免费观看完整版", u = v) : COVER_INFO.payStatus == o.VIP_TICKET && e.getUserTicket(function (i) { i > 0 ? (txv.vip.playerTipsEvent = "useticket", v = l + "[用券观看] 完整影片") : (txv.vip.playerTipsEvent = "minipay", v = l + "观影券已用完 [续费VIP] 立即获赠观影券"), u = v }); return u }, y = function (i) { return "trailerMode" == i.type ? (txv.vip.playerTipsEvent = "minipay", "正在试看精彩预览，[开通VIP] 免费观看完整版") : "getPayTip" === i.type && ("" !== d ? d : (txv.login.isLogin() ? e.getVipInfo(function (i, t) { d = i ? g() : f() }) : d = _(), "minipay" == txv.vip.playerTipsEvent && (a.click(COVER_INFO.typeid + "_vip_playertips:showOpenVip"), COVER_INFO.payStatus == o.VIP_MONTHLY && 1 == txv.cookie.get("vip_singlebuy") && (c(), txv.cookie.del("vip_singlebuy"))), "useticket" == txv.vip.playerTipsEvent && (a.click(COVER_INFO.typeid + "_vip_playertips:showUseTicket"), 1 == txv.cookie.get("vip_useticket") && (s(), txv.cookie.del("vip_useticket"))), "singlebuy" == txv.vip.playerTipsEvent && (a.click(COVER_INFO.typeid + "_vip_playertips:showSingleBuy"), 1 == txv.cookie.get("vip_singlebuy") && (c(), txv.cookie.del("vip_singlebuy"))), d)) }; r.on("vidChanged", function (i) { d = "", u = "", p = e.getTryTime(i.tryTime), l = "可试看" + p + "，" }), i.exports = y }, function (i, t, n) { var e = n(4), o = n(45), r = n(46); window.vid_list_detail = window.vid_list_detail || {}, window.PageMsg.on("playNext", function (i) { c.getVideoInfoForPlayer(i) }), window.PageMsg.on("vidChanged", function (i) { playingVid = i.vid }); var a = !1; COVER_INFO.typeid || (a = !0); var c = { getNextVidInfoForZT: function (i) { var t = vid_list_detail[i], n = vid_list_detail[t.__nextvid]; return "wait" == n.nextVid && c.loadNextVid(n.vid, !0), n }, getVidInfoForZT: function (i, t) { var n = vid_list_detail[i]; return n ? ("wait" == n.nextVid && c.loadNextVid(i, !0), void (t && t(n))) : void c.getVidDetail(i, function (n) { "wait" == n.nextVid && c.loadNextVid(i, !0), t && t(n) }) }, getVideoInfoForPlayer: function (i, t) { if (txv.log.log("getVideoInfoForPlayer " + i), a) return vid_list_detail[i] = $.extend({ nextVid: "wait" }, VIDEO_INFO), t && t(vid_list_detail[i]), void c.setNextIsRecommeds(vid_list_detail[i]); var n = vid_list_detail[i]; return n ? ("wait" == n.nextVid && c.loadNextVid(i), void (t && t(n))) : void c.getVidDetail(i, function (n) { "wait" == n.nextVid && c.loadNextVid(i), t && t(n) }) }, getVidDetail: function (i, t) { return vid_list_detail[i] ? void t(vid_list_detail[i]) : void r.get(i, {}, function (n, e) { n ? t({ vid: i }) : (vid_list_detail[i] = $.extend({}, e, { piantou: e.playStartTime, pianwei: e.playEndTime, preview: e.preview || e.pic160x90, nextVid: "wait" }), t(vid_list_detail[i])) }) }, getNextVidInfo: function (i) { txv.log.log("getNextVidInfo " + i); var t = vid_list_detail[i], n = vid_list_detail[t.__nextvid]; return "wait" == n.nextVid && c.loadNextVid(n.vid), n }, loadNextVid: function (i, t) { var n = vid_list_detail[i]; n.__nextvid || txv.login.addReadyCallback(function () { txv.vip.getVipInfo().always(function () { setTimeout(function () { r.get(i, { offset: 1 }, function (i, r) { var a = !!i; if (a) { if (t) return } else { if (vid_list_detail[r.vid] = $.extend({}, r, { piantou: r.playStartTime, pianwei: r.playEndTime, preview: r.preview || r.pic160x90, nextVid: "wait" }), t) return n.nextVid = !0, n.__nextvid = r.vid, void window.PageMsg.emit("tvp-setNextVid", { nextVid: !0, curVid: n.vid }); if (r.isFull || 3 == COVER_INFO.typeid || 106 == COVER_INFO.typeid) return n.nextVid = !0, n.__nextvid = r.vid, void window.PageMsg.emit("tvp-setNextVid", { nextVid: !0, curVid: n.vid }) } if (n.isFull) { var s = $("#next_period"), p = ""; if (s.length) return p = /(\w{15})\.html/gi.exec(s.attr("href"))[1], n.nextVid = !0, n.__nextvid = "nextperiod", vid_list_detail.nextperiod = { title: s.attr("title"), preview: o.coverPic(p, "hori"), previewPoster: o.coverPic(p, "hori").replace(".jpg", "_big.jpg"), pageUrl: s.attr("href"), nextVid: !0, vid: s.attr("href") }, void window.PageMsg.emit("tvp-setNextVid", { nextVid: !0, curVid: n.vid }); if (10 == COVER_INFO.typeid) { if (window.COLUMN_LIST) { var l = e.map(COLUMN_LIST, function (i) { return i.cid }), d = e.indexOf(l, COVER_INFO.id); if (d > 0) return n.nextVid = !0, n.__nextvid = "nextperiod", vid_list_detail.nextperiod = { title: COLUMN_LIST[d - 1].title, preview: COLUMN_LIST[d - 1].preview, previewPoster: COLUMN_LIST[d - 1].preview.replace(".jpg", "_big.jpg"), pageUrl: COLUMN_LIST[d - 1].pageUrl, nextVid: !0, vid: COLUMN_LIST[d - 1].pageUrl }, void window.PageMsg.emit("tvp-setNextVid", { nextVid: !0, curVid: n.vid }) } return a ? void c.setNextIsRecommeds(n) : (n.nextVid = !0, n.__nextvid = r.vid, void window.PageMsg.emit("tvp-setNextVid", { nextVid: !0, curVid: n.vid })) } (COVER_INFO.columnid > 0 || 2 == COVER_INFO.typeid || 1 == COVER_INFO.typeid || 3 == COVER_INFO.typeid || 106 == COVER_INFO.typeid) && c.setNextIsRecommeds(n) } else a ? c.setNextIsRecommeds(n) : (n.nextVid = !0, n.__nextvid = r.vid, window.PageMsg.emit("tvp-setNextVid", { nextVid: !0, curVid: n.vid })) }) }, 16) }) }) }, setNextIsRecommeds: function (i) { if (!i.__nextvid) { if (vid_list_detail.recommend) return i.nextVid = !0, void (i.__nextvid = "recommend"); var t = i.vid; window.PageMsg && window.PageMsg.emit("loadRecommends", t, function (t, n) { if (t && n) return i.nextVid = !0, i.__nextvid = "recommend", vid_list_detail.recommend = t, window.PageMsg.emit("tvp-setNextVid", { nextVid: !0, curVid: i.vid }), void window.PageStore("recommends").set(t); var e = c.hasRecommends(t); e && (i.nextVid = !0, i.__nextvid = "recommend", vid_list_detail.recommend = c.getRecommedsData(), window.PageMsg.emit("tvp-setNextVid", { nextVid: !0, curVid: i.vid })) }) } }, hasRecommends: function (i) { var t = i || window.PageStore && window.PageStore("recommends").get(); return t && t.length > 0 }, getRecommedsData: function (i) { var t, n = i || window.PageStore && window.PageStore("recommends").get(); if (n && n.length > 0) { var e = n[0].split("|"); e[0] == COVER_INFO.id && (e = n[1].split("|")), t = { title: e[1], previewPoster: e[3] || e[2], preview: e[2], pageUrl: o.playUrl(e[0]), nextVid: !0, vid: o.playUrl(e[0]) } } else if (n) return n; return t } }; i.exports = c }, function (i, t, n) { var e = n(4); i.exports = { outputVideoInfo: function (i, t) { return { vid: i.vid, playStartTime: i.head_time, playEndTime: i.tail_time, duration: i.duration, title: 3 == t || 106 == t ? e.escape(i.vname_title || i.title) : e.escape(i.c_title_output), episode: i.episode, showBullet: 1 == i.danmu, showImageBullet: 1 == i.c_has_adv_danmu, openBulletDefault: !!i.danmu_status, showMark: i.c_tags_flag, isNeedPay: !!+i.drm, tryTime: i.trytime, preview: this.imgUrl(i.pic160x90), isTrailer: i.is_trailer, positive_trailer: i.positive_trailer, isFull: i.c_full, viponly: i.viponly, notviponly: i.noviponly, series_num: i.series_num, series_part_title: i.series_part_title, category_map: i.category_map, sport_points_name: i.sport_points_name } }, formatNum: function (i) { if (!i) return 0; i += ""; var t = i.split(""), n = (t.shift(), ""); return i < 1e4 ? i : i >= 1e4 && i < 1e8 ? (i = parseInt(i / 1e3) + "", t = i.split(""), n = t.pop(), t.join("") + "." + (n ? n : "") + "万") : i >= 1e8 ? (i = parseInt(i / 1e7) + "", t = i.split(""), n = t.pop(), t.join("") + "." + (n ? n : "") + "亿") : void 0 }, splitNum: function (i) { for (var t = i + "", n = "", e = t.length, o = 0; e--;)o && o % 3 == 0 && (n = "," + n), o++ , n = t[e] + n; return n }, formatDate: function (i, t) { if (!i) return ""; if ("string" == typeof i && (i = new Date(i.replace(/-/g, "/"))), "Invalid Date" == i.toString()) return ""; t = t || "yyyy-MM-dd"; var n = { "M+": i.getMonth() + 1, "d+": i.getDate(), "h+": i.getHours(), "m+": i.getMinutes(), "s+": i.getSeconds(), "q+": Math.floor((i.getMonth() + 3) / 3), S: i.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (i.getFullYear() + "").substr(4 - RegExp.$1.length))); for (var e in n) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? n[e] : ("00" + n[e]).substr(("" + n[e]).length))); return t }, strCut: function (i, t, n) { if (i = String(i), t -= 0, n = n || "", isNaN(t)) return i; for (var e = i.length, o = Math.min(Math.floor(t / 2), e), r = i.slice(0, o).replace(/[^\x00-\xFF]/g, "**").length; o < e && r < t; o++)r += 1 + (i.charCodeAt(o) > 255); return i.slice(0, r > t ? o - 1 : o) + (o < e ? n : "") }, playUrl: function (i, t) { var n = ""; return "string" == typeof i ? 15 == i.length ? (n = "/x/cover/" + i, "string" == typeof t && t && (n += "/" + t), n += ".html") : n = "/x/page/" + i + ".html" : "string" == typeof t && (n += "/x/page/" + t + ".html"), n }, detailUrl: function (i) { return i && i.length > 0 ? "//v.qq.com/detail/" + i.substr(0, 1) + "/" + i + ".html" : "javascript:;" }, searchUrl: function (i, t) { if (i && i.length > 0) { t = t || "vlist"; var n = 4; return "//v.qq.com/search.html?pagetype=" + n + "&stag=txt.playpage." + t + "&ms_key=" + i } return "" }, showTime: function (i, t) { var n = function (i) { return i = parseInt(i), i < 10 ? "0" + i : "" + i }, e = []; return t ? (e.push(n(i / 3600)), e.push(n(i % 3600 / 60))) : e.push(n(i / 60)), e.push(n(i % 60)), e.join(":") }, videoCorner: function (i, t) { function n(i, t) { return i.replace(/\{(\w+)\}/g, function (i, n) { return t[n] || "" }) } function e(i, t) { for (var n = 0; n < t.length; n++)if (i === t[n]) return n; return -1 } var o = "", r = '<sup class="{param}">{text}</sup>', a = '<span class="{param}"><em class="mark_inner">{text}</em></span>', c = '<span class="{param}"><em class="mask_txt">{text}</em></span>', s = '<sup class="{param}">{text}</sup>'; if (t = t || [1, 2, 3, 4], i) { if ("string" == typeof i) try { i = JSON.parse(i) } catch (p) { } i.tag_3 && i.tag_3.id > 0 && e(3, t) != -1 && (o += n(c, i.tag_3)), i.tag_4 && i.tag_4.id > 0 && e(4, t) != -1 && (o += n(s, i.tag_4)), i.tag_1 && i.tag_1.id > 0 && e(1, t) != -1 && (o += n(r, i.tag_1)), i.tag_2 && i.tag_2.id > 0 && e(2, t) != -1 && (o += n(a, i.tag_2)) } return o }, coverCorner: function (i, t) { function n(i, t) { return i.replace(/\{(\w+)\}/g, function (i, n) { var e = t[n] || ""; return "param2x" == n && (e = t.param || "", e = e && e.replace && e.replace(/\.(\w+)$/, "@2x.$1 2x")), e && e.replace && e.replace(/^http\:/, "") }) } function e(i, t) { for (var n = 0; n < t.length; n++)if (i === t[n]) return n; return -1 } var o = "", r = '<sup class="{param}">{text}</sup>', a = '<i class="mark_v"><img src="{param}" srcset="{param2x}" alt="{text}"></i>', c = '<div class="figure_caption"><span class="figure_info">{text}</span></div>', s = '<sup class="{param}">{text}</sup>', p = /\/\/([\w\.]+\/)+(\w+\.\w+)$/; if (t = t || [1, 2, 3, 4], i) { if ("string" == typeof i) try { i = JSON.parse(i) } catch (l) { } i.tag_3 && i.tag_3.id > 0 && e(3, t) != -1 && (o += n(c, i.tag_3)), i.tag_4 && i.tag_4.id > 0 && e(4, t) != -1 && (o += n(s, i.tag_4)), i.tag_1 && i.tag_1.id > 0 && e(1, t) != -1 && (o += n(r, i.tag_1)), i.tag_2 && i.tag_2.id > 0 && e(2, t) != -1 && p.test(i.tag_2.param) && (o += n(a, i.tag_2)) } return o }, playnumIcon: function () { return '<i class="icon_sm icon_play_sm"><svg class="svg_icon svg_icon_play_sm" viewBox="0 0 16 16"><path d="M10.83 8.309l-.001.023-4.079 2.539-.005.003-.048.03-.013-.005c-.072.051-.149.1-.245.1-.217 0-.376-.165-.412-.369l-.028-.011V5.461l.009-.005c0-.009-.009-.014-.009-.022 0-.24.197-.435.44-.435.096 0 .174.049.246.101l.032-.017 4.129 2.569v.016a.42.42 0 0 1 .153.318.414.414 0 0 1-.169.323zm3.493 2.605a.986.986 0 0 1-.948.742 1 1 0 0 1-1-1 .98.98 0 0 1 .094-.412l-.019-.01c.34-.675.549-1.427.549-2.235a5 5 0 1 0-5 5c.767 0 1.484-.186 2.133-.494l.014.03a.968.968 0 0 1 .416-.098 1 1 0 0 1 1 1 .986.986 0 0 1-.77.954 6.897 6.897 0 0 1-2.793.608 7 7 0 1 1 7-7c0 1.048-.26 2.025-.676 2.915z"></path></svg></i>' }, hasRight: function (i) { if (i && i.length > 0) for (var t = 0; t < i.length; t++)if ("2" == i[t] || 2 == i[t]) return !0; return !1 }, zhengpianCounts: function (i, t) { var n = [10139, 10150, 10416, 10470, 10471, 10711, 10714, 10720, 10723, 10726, 10001, 10002, 10003, 10010, 10011, 10012, 10472, 10797, 10994, 10999, 10890], e = function (i) { if (!i || 0 == i.length) return 0; for (var t = 0, e = 0; e < i.length; e++)for (var o = i[e], r = 0; r < n.length; r++)if (o && o.category_map && o.category_map.length > 0 && o.category_map[0] == n[r]) { t++; break } return t }, o = 0; if (i.videolist && ([2, 3, 106].indexOf(i.type) > -1 ? o += e(i.videolist) : (o += e(i.videolist.full), o += e(i.videolist.aspect))), o += e(i.cliplist), t) { var r = i.video_ids.length + i.clips_ids.length; return r - o } return o }, metaTitle: function (i) { if (3 == i.type || 106 == i.type) return i.video.title; if (2 == i.type) { if (i.video.category_map && i.video.category_map.length > 0 && [10470, 10471, 10994, 10999].indexOf(i.video.category_map[0]) > -1) { var t = ""; return t = 0 == i.video.c_title_output.indexOf("第") ? i.video.c_title_output : "第" + i.video.c_title_output + "集", i.title + " " + t + "_1080P在线观看" } return i.video.c_title_output + "_" + i.title + "_1080P在线观看" } if (1 == i.type) return i.video.category_map && i.video.category_map.length > 0 && [10139, 10150, 10416, 10834, 10890].indexOf(i.video.category_map[0]) > -1 ? i.video.c_title_output + "_电影_高清1080P在线观看" : i.video.c_title_output + "_" + i.title + "_电影_高清1080P在线观看"; if (10 == i.type) { var n = i.video.c_title_output; return i.column && i.column.column_id > 0 && 0 == i.column.hide_flag ? i.column.title + n + "_综艺_高清1080P在线观看" : n + i.title + "_综艺_高清1080P在线观看" } var n = i.video.c_title_output; return i.column && i.column.column_id > 0 && 0 == i.column.hide_flag ? n + "_" + i.column.title : n + "_" + i.title }, metaDesc: function (i) { if (1 == i.type || 2 == i.type || 3 == i.type || 9 == i.type || 106 == i.type) return i.description || ""; if (10 == i.type) return i.column && i.column.column_id > 0 && 0 == i.column.hide_flag ? i.column.description || "" : i.description || ""; var t = i.title || ""; return i.second_title && i.second_title.length > 0 ? t += ": " + i.second_title : i.video.c_title_output && i.video.c_title_output.length > 0 && (t += ": " + i.video.c_title_output), t }, metaKeys: function (i) { var t = []; if (1 == i.type || 2 == i.type || 3 == i.type || 106 == i.type) { if (i.alias && i.alias.length > 0 && (t = t.concat(i.alias)), i.leading_actor && i.leading_actor.length > 0) for (var n = i.leading_actor.length > 3 ? 3 : i.leading_actor.length, e = 0; e < n; e++)t.push(i.leading_actor[e]) } else if (i.column && i.column.column_id > 0 && 0 == i.column.hide_flag && t.push(i.column.title), 10 == i.type) { if (i.guests && i.guests.length > 0) for (var n = i.guests.length > 3 ? 3 : i.guests.length, e = 0; e < n; e++)t.push(i.guests[e]) } else if (9 == i.type) { if (i.tag && i.tag.length > 0) for (var n = i.tag.length > 3 ? 3 : i.tag.length, e = 0; e < n; e++)t.push(i.tag[e]) } else i.urlHasVid ? i.video.pioneer_tag && i.video.pioneer_tag.length > 0 ? t.push(i.video.pioneer_tag.replace("+", ",")) : i.keyword && i.keyword.length > 0 && (t = t.concat(i.keyword)) : i.keyword && i.keyword.length > 0 ? t = t.concat(i.keyword) : i.video.pioneer_tag && i.video.pioneer_tag.length > 0 && t.push(i.video.pioneer_tag.replace("+", ",")); return t.push(i.type_name), t.join(",") }, realLength: function (i) { if (i) { for (var t = 0, n = 0; n < i.length; n++)i.charAt(n).match(/[\x00-\x07]/) || (t += i.charAt(n).match(/[\x07-\xFF]/) ? 1 : 2); return t } }, cartoonListTitle: function (i, t) { var n = i.vname_title || i.title || "", e = i.series_part_title || (i.series_name || "") + "第" + +i.episode + "集", o = i.episode; switch (+t.list_show_style) { case 1530990: return o; case 1530992: return e; case 1532404: return ["第" + o + "集", n].join(" "); case 1532405: return [e, n].join(" "); case 1530991: return n; default: return i.title } }, cartoonTitle: function (i, t) { var n = i.vname_title || i.title || "", e = i.series_part_title || (i.series_name || "") + "第" + +i.episode + "集", o = i.episode, r = !0; if (i.category_map && i.category_map.indexOf("正片") == -1) return i.title; var a; switch (+t.list_show_style) { case 1530990: a = ["第" + o + "集"], r && (r = t.title); break; case 1530992: a = [e], r && (r = i.series_name); break; case 1532404: a = ["第" + o + "集", n], r && (r = t.title); break; case 1532405: a = [e, n], r && (r = i.series_name); break; case 1530991: a = [n], r && (r = t.title); break; default: a = [i.title], r && (r = t.title) }return r && a.unshift(r), a.join(" ") }, episodeTitle: function (i, t) { var n = +(t.category_map ? t.category_map[0] : 0); if ([10470, 10471, 10994, 10999].indexOf(n) != -1) { var e = t.c_title_output || "", o = parseInt(e); return 0 == e.indexOf("第") || isNaN(o) || (e = "第" + o + "集"), ([10470, 10471, 10994, 10999].indexOf(n) != -1 ? i.title + " " : "") + e } return ([10470, 10471, 10994, 10999].indexOf(n) != -1 ? i.title + " " : "") + t.c_title_output }, peopleHref: function (i, t) { return t ? "http://v.qq.com/x/star/" + t : "http://v.qq.com/search.html?pagetype=3&stag=txt.playpage.vppdesc&ms_key=" + encodeURIComponent(i) }, formatPeople: function (i, t) { function n(i, t) { if (!(i && t && i.length && t.length && i.length == t.length)) return []; for (var n = [], e = 0; e < i.length; e++)n.push({ id: i[e], name: t[e] }); return n } if (!i || !t || !t[0]) return []; for (var e = {}, o = [], r = 0; r < t.length; r++)for (var a = t[r], c = n(i[a.id], i[a.name]), s = 0; s < c.length; s++) { var a = c[s]; a.id && !e[a.id] && (o.push(a), e[a.id] = !0) } return o }, imgUrl: function (i) { return i && i.replace(/^http\:/, "") }, escape: function (i) { return i ? String(i).replace(/([&<>'"])/g, "\\$1").replace(/[\n\r\s\t\v]/g, "") : "" }, coverPic: function (i, t, n) { var e = "//i.gtimg.cn/qqlive/img/jpgcache/files/qqvideo/"; if ("string" == typeof i) { var o = []; t && o.push(t), n = n || "", n.length > 0 && (n = "_" + n), o = o.concat([i.charAt(0), i + n + ".jpg"]), e += o.join("/") } return e }, extend: function () { return e.extend.apply(e, arguments) }, chnSlice: function (i, t) { if (i) { for (var n = [], e = 0, o = 0; o < i.length && (i.charAt(o).match(/[\x00-\x07]/) || (e += i.charAt(o).match(/[\x07-\xFF]/) ? 1 : 2), n.push(i.charAt(o)), !(e >= t)); o++); return n.join("") } } } }, function (i, t, n) {
    "use strict"; function e(i) { setTimeout(i, 0) } function o() { } var r = n(47), a = n(48), c = n(4), s = n(45); i.exports = {
        get: function (i, t, n) {
            n || "function" != typeof t || (n = t), t = t || {}, n = n || o; var l = t.sync || !1; if (i instanceof Array) { if (l) return i.map(function (i) { return r.data[i] }); var d = []; i.forEach(function (i) { var t = a.Deferred(); r.data[i] ? t.resolve(r.data[i]) : p(i, function (i, n) { i ? t.reject(i) : t.resolve(s.outputVideoInfo(n, COVER_INFO.typeid)) }), d.push(t) }), a.when.apply(a, d).done(function () { var i = Array.prototype.slice.call(arguments, 0); i.forEach(function (i) { r.data[i.vid] = i }), n(null, i) }).fail(function (i) { n(i) }) } else {
                var v = t.offset; if (v) { var u = c.indexOf(r.vid, i); if (i = r.vid[u + v], !i) { if (l) throw new Error("没有合适的视频了"); return n(new Error("没有合适的视频了")) } } if (l) return r.data[i] || null; r.data[i] ? e(function () { n(null, r.data[i]) }) : p(i, function (i, t) {
                    r.data[t.vid] = s.outputVideoInfo(t, COVER_INFO.typeid), n(i, t)
                })
            }
        }, vidlist: function (i, t) { return i = i || 0, t = t ? Math.min(t, r.vid.length) : r.vid.length, r.vid.slice(i, t) }, max: r.vid.length
    }; var p = n(49)(682)
}, function (i, t) { i.exports = LIST_INFO }, function (i, t) { i.exports = $ }, function (i, t, n) { "use strict"; var e = n(48); i.exports = function (i) { function t() { var i = c.slice(0); c = []; var t = i.map(function (i) { return i.id }).join(","); return e.ajax({ url: "//union.video.qq.com/fcgi-bin/data?otype=json&" + a + "&idlist=" + t, dataType: "jsonp" }).done(function (t) { t.results.forEach(function (t, n) { t.fields.id = t.id, i[n].callback(null, t.fields) }) }).fail(function (t) { i.forEach(function (i) { i.callback(t) }) }) } function n(i, n) { c.push({ id: i, callback: n || noop }), 30 == c.length ? (clearTimeout(r), r = null, t()) : r || (r = setTimeout(function () { t(), r = null }, 50)) } function o(i) { var t = e.Deferred(); return n(i, function (i, n) { i ? t.reject(i) : t.resolve(n) }), t } if (!i) throw new Error("需要vunion的tid"); var r, a = ["tid=" + i, "appid=20001238", "appkey=6c03bbe9658448a4"].join("&"), c = []; return function (i, t) { if (i instanceof Array) { for (var r = [], a = 0, c = i.length; a < c; a++)r.push(o(i[a])); e.when.apply(e, r).done(function () { t && t(null, arguments) }).fail(function (i) { t && t(i) }) } else n(i, t) } } }, function (i, t, n) { "use strict"; function e() { return !!window.NEXT_COVER && { title: NEXT_COVER.title, preview: NEXT_COVER.pic, previewPoster: NEXT_COVER.pic, pageUrl: a.playUrl(NEXT_COVER.cover_id), nextVid: !0, vid: a.playUrl(NEXT_COVER.cover_id) } } var o = n(46), r = n(4), a = n(45); window.PageMsg.on("playNext", function (i) { o.get(i, { offset: 1 }, function (t) { setTimeout(function () { window.PageMsg.emit("tvp-setNextVid", { nextVid: !(t && !e()), curVid: i }) }, 150) }) }); i.exports = { get: function (i, t) { o.get(i, function (n, r) { o.get(i, { offset: 1 }, function (i) { r.nextVid = !(i && !e()), t(r) }) }) }, getNext: function (i) { try { return r.extend(o.get(i, { offset: 1, sync: !0 }) || {}, { nextVid: "wait" }) } catch (t) { return window.NEXT_COVER ? { title: NEXT_COVER.title, preview: NEXT_COVER.pic, previewPoster: NEXT_COVER.pic, pageUrl: a.playUrl(NEXT_COVER.cover_id), nextVid: !0, vid: a.playUrl(NEXT_COVER.cover_id) } : { nextVid: !1 } } } } }, function (i, t, n) { "use strict"; function e(i, t) { return c ? t(null, c) : void (window.PageMsg && window.PageMsg.emit("loadRecommends", i, function (i, n) { if (i) { if (i && i.length > 0) { var e = i[0].split("|"); e[0] == COVER_INFO.id && (e = i[1].split("|")), c = { title: e[1], previewPoster: e[3] || e[2], preview: e[2], pageUrl: a.playUrl(e[0]), nextVid: !0, vid: a.playUrl(e[0]) } } else i && (c = i); t(null, c) } })) } var o = n(46), r = n(4), a = n(45); window.PageMsg.on("playNext", function (i) { o.get(i, { offset: 1 }, function (t) { t ? e(i, function (t, n) { setTimeout(function () { window.PageMsg.emit("tvp-setNextVid", { nextVid: !!n, curVid: i }) }, 150) }) : setTimeout(function () { window.PageMsg.emit("tvp-setNextVid", { nextVid: !0, curVid: i }) }, 150) }) }); var c = (i.exports = { get: function (i, t) { o.get(i, function (n, r) { txv.login.addReadyCallback(function () { txv.vip.getVipInfo().always(function () { o.get(i, { offset: 1 }, function (n) { n ? (r.nextVid = "wait", t(r), e(i, function (t, n) { n ? window.PageMsg.emit("tvp-setNextVid", { nextVid: !0, curVid: i }) : window.PageMsg.emit("tvp-setNextVid", { nextVid: !1, curVid: i }) })) : (r.nextVid = !0, t(r)) }) }) }) }) }, getNext: function (i) { try { return r.extend(o.get(i, { offset: 1, sync: !0 }) || {}, { nextVid: "wait" }) } catch (t) { return c ? c : (e(i, function (t, n) { n ? window.PageMsg.emit("tvp-setNextVid", { nextVid: !0, curVid: i }) : window.PageMsg.emit("tvp-setNextVid", { nextVid: !1, curVid: i }) }), { nextVid: "wait" }) } } }, null) }, function (i, t) { var n = window.PageMsg, e = "active_"; window.__tenvideo_setPlayerAction = function (i) { if (i && i.cmd > 0) return 2 == i.cmd ? n.emit("flash_action", i) : n.emit(e + i.cmd, i), !0 }, n.on("vidChanged", function () { $(".l_qq_com").show() }) }, function (i, t) { txv && txv.login && Txplayer && Txplayer.msg && (txv.login.addLoginCallback(function () { Txplayer.msg.broadcast("afterLogin") }), txv.login.addLogoutCallback(function () { Txplayer.msg.broadcast("afterLogout") })) }, function (i, t, n) { "use strict"; function e(i) { o.wait("tvp-brandApiReady", function () { o.emit("tvp-brandStatusUpdate", i) }) } var o = window.PageMsg, r = n(55); r.checkIsLogin = function () { return txv.login.isLogin() }, r.onNeedLogin = function () { txv.login.openLogin() }; var a = { vid: window.VIDEO_INFO.vid, info: window.VPP_INFO || {} }, c = { vid: window.VIDEO_INFO.vid, game: 1, info: window.GAME_INFO || {} }, s = a.info.euin && r(a.info.euin, e); o.on("uploaderChanged", function (i) { s && s.destroy(), s = i.info.euin && r(i.info.euin, e), a = i, c.vid = i.vid }), o.on("tvp-brandsubscribe", function () { s.toggle() }), i.exports = function () { return a.info.euin ? a : c.info.nick && "null" != c.info.nick ? c : {} } }, function (i, t) { "use strict"; function n(i, t, n) { txv.login.addReadyCallback(function () { return c.checkIsLogin() ? void $.ajax({ url: r, dataType: "jsonp", data: { fuin: i, op: t }, success: function (i) { "o" == i.s ? n(null, i) : (t != o.check && 100001 == i.code && e.apply(null, arguments), n(i)) }, error: function (i) { n(i) }, CSRF: !0 }) : void (t != o.check && e.apply(null, arguments)) }) } function e() { c.onNeedLogin(), p = arguments } var o = { check: "check", set: "set", del: "del" }, r = "//c.v.qq.com/follow?otype=json", a = {}; if (window.__txvSubscriber) i.exports = window.__txvSubscriber; else { var c = i.exports = window.__txvSubscriber = function (i, t) { if (!a[i]) { var e = !1, r = !1, c = function (i, t, e) { r = !0, n(i, t, function () { r = !1, e && e.apply(this, arguments) }) }; a[i] = {}, a[i]._callbacks = []; var p = function () { for (var t = 0; t < a[i]._callbacks.length; t++)a[i]._callbacks[t](e) }; a[i].subscribe = function (t) { 1 != e && c(i, o.set, function (i, n) { i || (e = !0, p()), t && t.apply(null, arguments) }) }, a[i].unsubscribe = function (t) { 0 != e && c(i, o.del, function (i, n) { i || (e = !1, p()), t && t.apply(null, arguments) }) }, a[i].toggle = function (t) { return e ? a[i].unsubscribe(t) : a[i].subscribe(t) }, a[i].uin = i, a[i].__check = function () { s && c(i, o.check, function (i, t) { i || "f" != t.s || 100001 != t.code || (s = !1), !i && t.follow && (e = !0, p()) }) }, a[i].__set = function (i) { e = !!i, p() }, a[i].__get = function () { return e }, a[i].__check() } return a[i]._callbacks.push(t), t(a[i].__get()), { toggle: a[i].toggle, subscribe: a[i].subscribe, unsubscribe: a[i].unsubscribe, uin: a[i].uin, destroy: function () { for (var n = 0; n < a[i]._callbacks.length; n++)if (a[i]._callbacks[n] == t) { a[i]._callbacks.splice(n, 1); break } } } }, s = !0; c.login = function () { s = !0; for (var i in a) a[i].__check(); p && n.apply(null, p) }, c.logout = function () { s = !1; for (var i in a) a[i].__set(!1) }, c.checkIsLogin = function () { }, c.onNeedLogin = function () { }; var p = null } }, function (i, t) { var n = { getUrlParam: function (i, t) { t = t || location.href; var n, e = new RegExp("[?&#]" + i + "=([^&#]+)", "gi"), o = t.match(e); return o && o.length > 0 ? (n = o[o.length - 1].split("="), n && n.length > 1 ? n[1] : "") : "" }, addUrlParam: function (i, t) { t = t || document.URL; var e = t + "?"; t.indexOf("?") > -1 && (e = t + "&"); for (var o in i) if (n.getUrlParam(o, e)) { var r = new RegExp("([?&#]" + o + "=)([^&#]+)(.*?)", "i"); e = e.replace(r, "$1" + i[o] + "$3") } else e = e + o + "=" + i[o] + "&"; var a = e.length, c = e.charAt(a - 1); return "?" != c && "&" != c || (e = e.substring(0, a - 1)), e }, getVidFromUrl: function (i) { i = i || document.URL || document.location.href; var t, e = n.getUrlParam("vid", i); return e || (t = i.match(/\/\w{15}\/(\w+)\.html/)) && (e = t[1]), e || ((t = i.match(/\/page\/(\w+)\.html/)) ? e = t[1] : (t = i.match(/\/(page|play)\/+(\w{11})\.html/)) && (e = t[2])), e || (t = i.match(/\/boke\/gplay\/\w+_\w+_(\w+)\.html/)) && (e = t[1]), /^[a-zA-Z0-9]+$/.test(e) ? encodeURIComponent(e) : "" }, getDefaultVid: function () { var i = this.getVidFromUrl(); if (VIDEO_INFO) i = VIDEO_INFO.sv || VIDEO_INFO.vid; else { var t = "mod_videolist", n = $("#" + t).find("li"), e = n.eq(0); 1 == e.length && (i = e.attr("sv") || e.attr("id") || "") } return i }, getCurUrl: function () { return document.URL || document.location.href }, reportPV: function (i) { var t = "", e = n.getCurUrl(), o = i || this.getVidFromUrl(); t = COVER_INFO.id ? "/x" + (e.indexOf("/prev/") > 0 ? "/prev/" : "/cover/") + COVER_INFO.id + "/" + (o ? o : "index") + ".html" : e.replace("http://v.qq.com", "").replace("https://v.qq.com", ""), txv.tj2.pv({ virtualURL: t }), txv.tj2.virtualpv(["cover/", COVER_INFO.typeid, ".html"].join("")) } }; i.exports = n }, function (i, t, n) { var e = n(58), o = n(62), r = (n(59), n(60)), a = { setInfo: r.setInfo, getHistoryByCid: function (i, t) { if (!txv.login.isLogin()) return a.getLocalRecordByIds(i, t); var n = $.Deferred(); return $.when(a.getServerRecordByIds(i, t), a.getLocalRecordByIds(i, t)).then(function (i, t) { txv.log.log("server history"), txv.log.log(i), txv.log.log("local history"), txv.log.log(t), t && t.date > i.date ? n.resolve(t) : n.resolve(i) }), n.promise() }, getServerRecordByIds: function (i, t) { return o.getHistoryByCid(i, t) }, getLocalRecordByIds: function (i, t) { return e.getHistoryByCidVid(i, t) }, add: function (i, t, n) { e.add(i, t, n) }, getReportList: e.getList }; i.exports = a }, function (i, t, n) { function e(i, t, n) { var e, r = o(); if ((r.length < 2 || r.indexOf("_") === -1) && i != h.finish) return void f.trace("add history error: not enough options!"); if (++g, c(t, n, i), !N.isLogin()) return void f.trace("not login!!"); if (i == h.playing && g < y) return void f.trace("没达到次数限制，不上报服务器:" + g); if (i == h.begin || 0 == i) return void f.trace("不上报开始播放:"); if (g = 0, w) t = Math.ceil(t), e = { time: t, keyid: r, vtype: E.getinfo().typeid }, F.reportOne(e); else { w = !0; var s = u(); s && F.batchReport({ list: s.join("|") }).done(function () { p(a()) }) } } function o() { var i = E.getinfo(); return [i.coverid, i.vid].join("_") } function r() { return Math.ceil(+new Date / 1e3) } function a(i) { return i = i || I, N.isLogin() ? i + N.getUnicode() : i } function c(i, t, n) { if (!x) { var e = o(), c = r(), p = a(), u = E.getinfo().typeid, _ = ""; if (!E.getinfo().tit || !E.getinfo().lnk || e.length < 2 || x || e.indexOf("_") === -1) return void f.trace("add local history error: option error"); x = !0; var g = l(p); g ? (_ = E.getinfo().coverid || "_" + E.getinfo().vid, g = v(g, _)) : g = ""; var y = d(e, c, i, t, u); g = g ? y + "|" + g : y, V.set(p, g), s(p, c, 1), x = !1 } } function s(i, t, n) { if (k && !(arguments.length < 2 || isNaN(t))) { var e = V.get(O); if (!e) return void V.set(O, [i, t, t].join(",")); var o = new RegExp("(" + i + ")(,\\d+)(,\\d+)", "g"); if (o.test(e)) e = 1 == n ? e.replace(o, "$1," + t + "$3") : e.replace(o, "$1$2," + t); else { var r, a = e.split("|"), c = t; if (a.length >= b) { for (var s, r, c = t, p = 0, l = a.length; p < l; p++)if (a[p]) { var d = a[p].split(","); d[1] <= c && d[0] !== i && (c = d[1], s = d[0], r = p) } !isNaN(r) && r < l && a.splice(r, 1), V.remove(s), e = a.join("|") } else e += "|" + [i, t, t].join(",") } V.set(O, e) } } function p(i) { V.remove(i); var t = r(), n = V.get(O); if (n) { for (var e = n.split("|"), o = [], a = i.replace(N.getUnicode(), ""), c = 0, s = e.length; c < s; c++) { var p = e[c], l = p.split(","); l[0] && l[0] != i && (l[0] == a ? o.push(p.replace(l[2], t)) : o.push(p)) } V.set(O, o.join("|") || "") } } function l(i) { var t = V.get(i); if (!t) return ""; for (var n, e, o = t.split("|"), r = [], a = o.length - 1, c = a; c >= 0; c--)n = o[c], e = n.substr(0, n.indexOf(",")), t.indexOf(e) == t.lastIndexOf(e) && r.unshift(n), t = o.slice(0, c).join("|"); return r.join("|") } function d(i, t, n, e, o, r) { if (r = E.getinfo().tit || r, "string" == $.type(r)) { var a = E.getinfo().isPay ? 1 : 0; return r = r.replace(",", "&#44;"), isNaN(parseInt(o)) ? [i, r, t, n, e, a].join(",") : [i, r, t, n, e, a, o].join(",") } return "" } function v(i, t) { var n = i.split("|"), e = n.length; return e > m && (i = n.splice(0, m).join("|")), i = i.replace(new RegExp(t + "[^\\|]+\\|?", "gi"), ""), /(\|)$/.test(i) && (i = i.replace(RegExp.$1, "")), e >= m ? i.replace(/\|[^|]+$/g, "") : i } function u() { function i(i) { return i && 7 == i.length ? [i[0], i[3], i[2], 0, i[6]].join("+") : [i[0], i[3], i[2]].join("+") } if (!k) return []; var t = V.get(O); if (targetUins = _(t), reportList = [], 0 == targetUins.length) return reportList; for (var n = {}, e = {}, o = 0, r = targetUins.length; o < r; o++) { var a = targetUins[o][0], c = targetUins[o][2], s = l(a); if (s) for (var p, d = s.split("|"), v = 0, u = d.length; v < u; v++)if (p = d[v].split(","), p.length >= 4 && "string" == $.type(p[0]) && p[0].indexOf("_") !== -1 && p[2] >= c) { var f = p[0].split("_"); "undefined" == typeof n[f[0]] ? (n[f[0]] = p[2], reportList.push(i(p)), e[f[0]] = reportList.length - 1) : n[f[0]] < f[2] && a.indexOf(txv.login.getUin()) != -1 && (n[f[0]] = p[2], reportList[e[f[0]]] = i(p)) } } return reportList } function _(i) { var t = []; if ("string" == $.type(i)) for (var n = i.split("|"), e = a(), o = 0, r = n.length; o < r; o++) { var c = n[o], s = c.split(","); s[0] == I ? s[1] >= s[2] && t.push(s) : s[0] == e && s[1] >= s[2] && t.push(s) } return t } var f = txv.log, g = 12, y = 12, m = 10, x = !1, h = { finish: -2, begin: -1, playing: -3 }, w = !1, k = function () { try { return localStorage.setItem("support", "1"), localStorage.removeItem("support"), !0 } catch (i) { return !1 } } (), V = { get: function (i) { return "" }, set: function (i, t) { }, remove: function (i) { } }; k && $.extend(V, { get: function (i) { return localStorage.getItem(i) }, set: function (i, t) { localStorage.setItem(i, t) }, remove: function (i) { localStorage.removeItem(i) } }); var O = "ten_video_history_uin_storage_key", b = 5, I = "ten_video_history", E = (n(59), n(60)), N = txv.login, F = n(61); i.exports = { add: e, getHistoryByCidVid: function (i, t) { var n, e = $.Deferred(), o = a(), r = [], c = !1, s = { vid: "", title: "", coverid: "", playurl: "", date: 0, time: 0 }, p = 0, d = l(o); if (d) { d = d.split("|"), n = i || t; for (var v = 0, u = d.length; v < u; v++)if (r = d[v].split(","), r[0].indexOf(n) != -1) { r[3] = parseInt(r[3]), p = isNaN(r[3]) || $.inArray(r[3], [-2, -1]) != -1 ? 0 : r[3], s = { time: p, title: r[1], date: r[2] - 0, vid: r[0].split("_")[1], coverid: r[0].split("_")[0] }, c = !0; break } } return e.resolve(s), e.promise() } } }, function (i, t) { i.exports = { api: { myviewreport: "//like.video.qq.com/fcgi-bin/myviewreport?otype=json" }, rParamT: { ONEREPORT: 3, BATCHREPORT: 4, ONEINFO: 6 } } }, function (i, t) { var n = { coverid: "", tit: null, lnk: null, isPay: 0, vid: "", typeid: "" }; i.exports = { getinfo: function () { return n }, setInfo: function (i) { $.extend(n, i) } } }, function (i, t, n) { function e(i) { $.ajax({ url: a.api.myviewreport, dataType: "jsonp", data: $.extend(i, { plat: 2, pver: 3, rf: "v", t: a.rParamT.ONEREPORT }, o()), CSRF: !0, success: function (i) { c.trace("set history record success!") }, error: function () { c.trace("set history record error!") } }) } function o() { return { ptag: txv.tj2.getPtag(), qtag: txv.tj2.getQtag() } } function r(i) { var t = $.Deferred(); return $.ajax({ url: a.api.myviewreport, dataType: "jsonp", data: $.extend({ pn: 1, list: "", rf: "v" }, i, { t: a.rParamT.BATCHREPORT, cur: 1, simp: 1, plat: 2, pver: 3, otype: "json" }), CSRF: !0, success: function (i) { return i && i.result && 0 == i.result.code ? void t.resolve() : void t.reject() }, error: function () { c.trace("set history record error!"), t.reject() } }), t } var a = n(59), c = txv.log; n(58); i.exports = { reportOne: e, batchReport: r } }, function (i, t, n) { function e(i, t) { var n = $.Deferred(); return $.ajax({ url: i, dataType: "jsonp", data: t, CSRF: !0, success: function (i) { return i && i.result && 0 == i.result.code ? void n.resolve(i) : void n.reject() }, error: function () { n.reject() } }), n.promise() } var o = n(59), r = n(60); i.exports = { getHistoryByCid: function (i, t) { var n, a, c, s = $.Deferred(), p = i + "_" + t, l = !0; return l && (n = { t: o.rParamT.ONEINFO, plat: 2, keyid: p, otype: "json", vtype: r.getinfo().typeid }, a = o.api.myviewreport), c = { vid: "", date: 0, time: 0 }, e(a, n).always(function (i) { $.extend(c, i), c.time = c.time - 0, $.inArray(c.time, [-1, -2]) != -1 && (c.time = 0), c.time < 0 && (c.time *= -1), s.resolve(c) }), s.promise() } } }, function (i, t, n) { function e() { var i = n(20); i.isPcClientExist().then(function () { i.openClient(1, "web.vkadun") }).fail(function (t) { i.showPopAlert(1, "", "//node.video.qq.com/x/api/download_pc") }) } i.exports = { init: function () { var i = window.PageMsg; i.on("tvp-openClientPlay", function () { e() }) } } }, function (i, t) { if ((txv.ua.windows || txv.ua.macs && !txv.util.useHtml5()) && window.player_time_speed && window.player_time_speed.start > 0) { var n = window.PageMsg, e = 0, o = function (i) { txv.login.isLogin() ? txv.vip.getVipInfo().done(function (t) { e = 1 == t.vip ? 2 : 1, i && i() }).fail(function () { e = 1, i && i() }) : (e = 0, i && i()) }, r = function (i) { var t = "//btrace.video.qq.com/kvcollect?", n = { BossId: 3699, Pwd: 1439649858, type: COVER_INFO.typeid, pageType: 4, usertype: e, playertype: "", ua: navigator.userAgent, url: document.URL || document.location.href }; PLAYER && (n.playertype = PLAYER.getPlayerType()), n = $.extend(n, i), n = $.param(n); var o = [t, n, "&_=", Math.ceil(1e3 * Math.random())].join(""); txv.report(o) }, a = function () { var i = !1; n.wait("tvp-playing", function () { i || (r({ timeType: 2, time: window.player_time_speed.firstPic - window.player_time_speed.start }), r({ timeType: 1, time: window.player_time_speed.playerInit - window.player_time_speed.start }), r({ timeType: 3, time: window.player_time_speed.end - window.player_time_speed.start }), r({ timeType: 4, time: window.player_time_speed.js }), r({ timeType: 5, time: window.player_time_speed.firstPic - window.player_time_speed.playerInit }), i = !0) }) }; txv.login.addReadyCallback(function () { o(a) }) } }, function (i, t, n) { function e(i) { a.setInfo({ coverid: COVER_INFO.id, vid: i.vid, tit: i.title, typeid: COVER_INFO.typeid, isPay: COVER_INFO.isPay, lnk: "link" }) } function o(i) { return !(COVER_INFO.id && 1 == COVER_INFO.positive_trailer && 2 == i.positive_trailer) } var r = window.PageMsg, a = n(57), c = VIDEO_INFO.id, s = VIDEO_INFO.title, p = VIDEO_INFO.duration, l = 10, d = 0, v = 300, u = !1; e(VIDEO_INFO), u = o(VIDEO_INFO), r.on("tvp-timeupdate", function (i, t) { u && (d++ , (t || d % l == 0 && p > 0) && (i = Math.floor(i), p > v ? a.add(-3, i, p) : a.add(0, 0, p))) }), r.wait("vidChanged", function (i) { c = i.vid, s = i.title, p = 1 * i.duration, e(i), u = o(i), u && a.add(0, 0, p) }), r.on("vidChanged", function (i) { c = i.vid, s = i.title, p = 1 * i.duration, e(i), u = o(i), u && a.add(0, 0, p) }), r.on("tvp-playend", function () { u && p > 0 && a.add(-2, -2, p) }) }, function (i, t, n) { function e(i) { var t = i.getHours(), n = i.getMinutes(), e = "" + t, o = "" + n; return t < 10 && (e = "0" + e), n < 10 && (o = "0" + o), e + ":" + o } function o(i) { var t = i.match(/(\d+\-\d+\-\d+)\s*(\d+:\d+:\d+)/); if (t && t[1] && t[2]) return new Date(t[1] + "T" + t[2]) } function r(i) { s != i && $("#error_player").hide(), s = i } var a = n(21), c = n(3), s = VIDEO_INFO.vid || "", p = { 1540078: "web网页", 1540079: "PC客户端", 1540080: "iPhone", 1540081: "aPhone", 1540082: "iPad", 1540083: "TV云视听极光" }, l = { 1540085: { text: "1小时", hour: 1 }, 1540086: { text: "2小时", hour: 2 }, 1540087: { text: "3小时", hour: 3 } }; c.on("tvp-vidChange", r), c.wait("tvp-vidChange", r), c.on("tvp-error", function (i) { if (80 == i.code && 2 == i.exem) { var t = $("#error_player"), n = window.PLAYER; if (n && (n.isBrowserFullscreen() && n.exitBrowserFullscreen(), n.isWindowFullscreen() && n.exitWindowFullscreen()), t.length) { var r = t.find(".player_countdown_time"), c = r.data("start") + "", d = t.find(".player_countdown_desc"), v = t.find("a[data-play]"), u = ("" + d.data("plats-ids")).split(","), _ = ("" + d.data("time-ids")).split(","), f = [], g = "", y = 0, m = !1; if (u.length) { u.sort(function (i, t) { return i > t ? 1 : -1 }); for (var x = 0, h = u.length; x < h; x++) { var w = u[x], k = p[w]; 1540079 == w && (m = !0), k && f.push(k) } } if (txv.ua.windows && m ? (v.bind("click", function () { var i = function () { txv.tips.FloatWarning({ title: "未检测到腾讯视频客户端，安装后可在客户端观看", useMask: !1 }), location.href = "//node.video.qq.com/x/api/download_pc" }; a.exist().done(function () { var t = COVER_INFO.id || "", n = "qqlive://sso/vbarid=" + t + "&videoid=" + s + "&stag=vtoclient&atag=vtoclient"; a.open(n).fail(i) }).fail(i) }), v[0] && txv.clipboard.to({ el: v[0], text: "qqlivechannel=channel1.vtoclient" })) : v.hide(), _[0]) { var V = l[_[0]]; V && (g = V.text, y = 60 * V.hour * 60 * 1e3) } var O = o(c), b = "", I = "", E = "", N = ""; if (O) { var F = (O.getHours(), O.getMinutes(), new Date(O.getTime() + y)), N = e(F); E = e(O), I = "（原" + N + "提前到" + E + "）" } f.length && (b = "发现新秘籍，" + f.join("/") + "提前" + g + "更新" + I), r.text(N), d.text(b), t.show() } } }), i.exports = { timeMap: l } }]);